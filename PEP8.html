<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        PEP8 Tool - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.figma{display:table;position:relative;width:100%;padding-bottom:56.25%}.figma iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;border:1px solid #eee}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:50%;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;text-decoration:none;padding-left:22px}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em;font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true"><h6 id="tags-Language" data-id="tags-Language"><a class="anchor hidden-xs" href="#tags-Language" title="tags-Language"><span class="octicon octicon-link"></span></a><span>tags: </span><code>Language</code></h6><h1 id="PEP8-Tool" data-id="PEP8-Tool"><a class="anchor hidden-xs" href="#PEP8-Tool" title="PEP8-Tool"><span class="octicon octicon-link"></span></a><span>PEP8 Tool</span></h1><p><strong><a href="https://www.python.org/dev/peps/pep-0008/" target="_blank" rel="noopener"><span>PEP 8</span></a><span> 是 Python代碼風格規範</span></strong><br>
<span>它對行長度，縮進，多行表達式和命名約定等內容有明確的規範。</span></p><p><span>團隊可能也有自己的代碼規則，可能與PEP 8略有不同。</span><br>
<span>但是，任何代碼風格都是為了在代碼庫中強制實施一致的標準，使其更具可讀性，從而更易於維護。</span></p><div class="alert alert-danger">
<p><span>Python Enhancement Proposal (PEP)</span><br>
<span>裡面有許多 Python 本體開發相關的文件，像是某個新功能的開發理念，某個功能改變的說明等等的</span></p>
</div><h2 id="Standard-Format" data-id="Standard-Format"><a class="anchor hidden-xs" href="#Standard-Format" title="Standard-Format"><span class="octicon octicon-link"></span></a><span>Standard Format</span></h2><p><a href="https://sites.google.com/site/ezpythoncolorcourse/pythonpep8" target="_blank" rel="noopener"><span>Python程式風格規範（PEP8）</span></a><br>
<a href="https://www.python.org/dev/peps/pep-0008/" target="_blank" rel="noopener"><span>PEP 8 – Style Guide for Python Code</span></a></p><p><img src="https://i.imgur.com/nsFedJF.png" alt="" loading="lazy"></p><hr><p><a href="https://www.youtube.com/watch?v=Mqv6QLlXXc4" target="_blank" rel="noopener"><span>影片講解:  Python的代码风格 PEP8</span></a><br>
<a href="https://subineru.wordpress.com/2018/02/20/python-%E8%AE%8A%E6%95%B8%E5%91%BD%E5%90%8D%E8%A6%8F%E5%89%87/" target="_blank" rel="noopener"><span>Python 變數命名規則</span></a></p><p><ins><strong><span>1. Indentation – 內縮該用空格還是Tab控制字元</span></strong></ins><br>
<span>Use 4 spaces per indentation level.</span><br>
<span>(a) 程式碼應該使用空格做出內縮的效果，不要用Tab控制字元。</span><br>
<span>(b) list 中方括號兩個要獨自佔一行，</span><br>
<img src="https://i.imgur.com/KOA8auc.png" alt="" loading="lazy"></p><p><ins><strong><span>2. Blank Lines  – 空白行</span></strong></ins><br>
<span>在運算式中，變數、運算子和數字之間都必須用空格隔開。</span><br>
<span>(a) Surround top-level function and class definitions with two blank lines.</span><br>
<span>(b) Method definitions inside a class are surrounded by a single blank line.</span><br>
<img src="https://i.imgur.com/z9pzZBx.png" alt="" loading="lazy"></p><p><ins><strong><span>3. Maximum Line Length – 程式碼的寬度</span></strong></ins><br>
<span>Limit all lines to a maximum of 79 characters.</span><br>
<span>每一行程式碼的長度不要超過79個字元。</span><br>
<span>如果是註解，則不要超過88個字元。</span></p><p><ins><strong><span>4. Whitespace 空格使用</span></strong></ins><br>
<span>(a ) list 每個元素中逗號後面要一個空格</span><br>
<span>(b ) 表達示(== !=) 前後變量要空格</span><br>
<span>(c ) slice 切片訪問冒號不用空格</span><br>
<img src="https://i.imgur.com/6XeU8YG.png" alt="" loading="lazy"></p><p><ins><strong><span>5. import</span></strong></ins><br>
<span>(a) Imports should usually be on separate lines:</span><br>
<span>(b) Imports should be grouped in the following order:</span><br>
<span>* Standard library imports.</span><br>
<span>* Related third party imports.</span><br>
<span>* Local application/library specific imports.</span><br>
<img src="https://i.imgur.com/n1TdGWr.png" alt="" loading="lazy"></p><p><ins><strong><span>6. 變數命名</span></strong></ins><br>
<span>Modules and packages : 一律小寫</span><br>
<span>Globals and constants : 一律大寫</span><br>
<span>Classes : 英文單字開頭第一個字大寫,其餘小寫,文字串接不使用下底線 ex: ClassName</span><br>
<span>Methods and functions : 一律小寫,文字串接的時候使用下底線 ex: method_name</span><br>
<span>Local variables : 一律小寫,文字串接的時候使用下底線 ex: method_name</span></p><ul>
<li><span>Class names should normally use the CapWords convention.</span></li>
<li><span>Modules should have short, all-lowercase names. Underscores can be used in the module name if it improves readability. Python packages should also have short, all-lowercase names, although the use of underscores is discouraged.</span></li>
<li><span>Function names should be lowercase, with words separated by underscores as necessary to improve readability.</span></li>
<li><span>Constants are usually defined on a module level and written in all capital letters with underscores separating words. Examples include MAX_OVERFLOW and TOTAL.</span></li>
</ul><p><span>–</span></p><ul>
<li><ins><span>Linter 靜態程式分析工具</span></ins><br>
<span>檢查程式風格/錯誤的小工具，作用是提高程式質量、讓你方便的發現一些typo。</span><br>
<span>類似於 word 當中的拼寫檢查，只是word 檢查的是自然语言，而linter 檢查的是機器程式。</span></li>
</ul><p><span>Python 最常被使用的 linter 大概就是 </span><span class="green"><strong><span>pylint</span></strong></span><span> 和 </span><span class="green"><strong><span>flake8</span></strong></span><span>，兩個都是以 python package 的形式存在，也提供 command line tool。</span></p><h2 id="Compare" data-id="Compare"><a class="anchor hidden-xs" href="#Compare" title="Compare"><span class="octicon octicon-link"></span></a><span>Compare</span></h2><p><a href="https://wei-lee.me/pycon-note/posts/pycon-us-2018/2019/09/automating-code-quality/" target="_blank" rel="noopener"><span>Automating Code Quality</span></a></p><ul>
<li><span>pylint 會做非常複雜的分析，例如會檢查 import 會不會失敗等等的跨檔案的檢查，因此速度非常慢，通常只要開發幾個禮拜的程式，對一個檔案做一次 pylint，就會花 5~10 秒，甚至更長的時間</span></li>
<li><span>flake8 只做單檔檢查，速度非常快，幾乎都是一瞬間</span></li>
</ul><p><a href="https://blog.csdn.net/weixin_42357472/article/details/106015801" target="_blank" rel="noopener"><span>Python PEP8 代码规范常见问题及解决方法</span></a></p><p><img src="https://i.imgur.com/SJ3zyyd.png" alt="" loading="lazy"></p><p><span>flake8 在大多數狀況已經足夠</span><br>
<span>花時間去修改成符合某些 pylint 過於嚴格的檢查，或設定 .pylint，對我來說並不值得</span><br>
<a href="https://zh-tw.coderbridge.com/series/66cb226274ea4d349abd49d2aef44037/posts/ee629b2e56b549399550b6a90b3cce04" target="_blank" rel="noopener"><span>Guido 也是這麼說的</span></a><br>
<img src="https://i.imgur.com/ZxZp7h5.png" alt="" loading="lazy"></p><h2 id="Flake8" data-id="Flake8"><a class="anchor hidden-xs" href="#Flake8" title="Flake8"><span class="octicon octicon-link"></span></a><span>Flake8</span></h2><p><a href="https://zh-tw.coderbridge.com/series/66cb226274ea4d349abd49d2aef44037/posts/ee629b2e56b549399550b6a90b3cce04" target="_blank" rel="noopener"><span>參考文獻: Python Table Manner - 程式碼風格</span></a></p><p><span>Flake8 是對下面三個工具的封裝</span></p><ol>
<li><span>PyFlakes: 靜態檢查 Python code 邏輯錯誤的工具。</span></li>
<li><span>Pep8: 靜態檢查 PEP8 編碼風格的工具。</span></li>
<li><span>NedBatchelder’s McCabe script：靜態分析 Python code 複雜度的工具。</span></li>
</ol><div class="alert alert-success">
<p><ins><span>Flake8’s own project structure</span></ins><br>
<span>flake8</span><br>
<span>├── docs</span><br>
<span>│   ├── build</span><br>
<span>│   └── source</span><br>
<span>│       ├── _static</span><br>
<span>│       ├── _templates</span><br>
<span>│       ├── dev</span><br>
<span>│       ├── internal</span><br>
<span>│       └── user</span><br>
<span>├── flake8</span><br>
<span>│   ├── formatting</span><br>
<span>│   ├── main</span><br>
<span>│   ├── options</span><br>
<span>│   └── plugins</span><br>
<span>└── tests</span><br>
<span>├── fixtures</span><br>
<span>│   └── config_files</span><br>
<span>├── integration</span><br>
<span>└── unit</span></p>
</div><p><span>flake8 是 Python 最常被使用的 linter 之一。</span><br>
<span>幾乎是所有 Python 開源專案的標準配備</span></p><table>
<thead>
<tr>
<th><span>Option</span></th>
<th><span>Description</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>–ignore=errors</span></td>
<td><span>skip errors and warnings (default: E121,E123,E126,E226,E24,E704)</span></td>
</tr>
<tr>
<td><span>–select=errors</span></td>
<td><span>select errors and warnings (e.g. E,W6)</span></td>
</tr>
<tr>
<td><span>–exclude-from-doctest= xxx</span></td>
<td><span>Skip these files when running doctests</span></td>
</tr>
<tr>
<td><span>–count</span></td>
<td><span>print total number of errors and warnings to standard error</span></td>
</tr>
<tr>
<td><span>–statistics</span></td>
<td><span>count errors and warnings</span></td>
</tr>
<tr>
<td><span>-q, --quiet</span></td>
<td><span>report only file names, or nothing with -qq</span></td>
</tr>
<tr>
<td><span>–exclude=patterns</span></td>
<td><span>exclude files or directories which match these comma separated patterns</span></td>
</tr>
<tr>
<td><span>–max-complexity=MAX_COMPLEXITY</span></td>
<td><span>McCabe complexity threshold</span></td>
</tr>
<tr>
<td><span>–config</span></td>
<td><span>Path to the config file that will be the authoritative config source. This will cause Flake8 to ignore all other configuration files.</span></td>
</tr>
</tbody>
</table><ol>
<li>
<p><span>–exclude: 排除某些檔案 (用batch check 的時候，忽略指定的文件)：</span><br>
<span>example: flake8 *py --exclude </span><a href="http://test1.py" target="_blank" rel="noopener"><span>test1.py</span></a><br>
<img src="https://i.imgur.com/7xKONhN.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>–statistics: 統計錯誤種類數量 可搭配 -qq or -q</span><br>
<img src="https://i.imgur.com/dCnOuIG.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>–count: 印出錯誤總數量 可搭配 -qq or -q</span><br>
<img src="https://i.imgur.com/Ymnswxc.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>–ignore=error: 你想忽略的錯誤</span><br>
<img src="https://i.imgur.com/H8NkAUC.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>–select=error: 你想列出的錯誤 or 指定類型的錯誤</span><br>
<img src="https://i.imgur.com/hvIPzKz.png" alt="" loading="lazy"><br>
<span>假如ignore裡面包含H101，但是select也包含H101怎麼辦？</span><br>
<span>–&gt; select的優先級比ignore高</span></p>
</li>
<li>
<p><span>–max-complexity: code複雜度檢查，通過這個參數設一個定值，超過的將顯示出来 code複雜度檢查</span><br>
<img src="https://i.imgur.com/iGqmQ66.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>–config: 設定指定config 檔案，因為flake8 可支援3種形式的config</span><br>
<img src="https://i.imgur.com/0afWJ9O.png" alt="" loading="lazy"></p>
</li>
</ol><h3 id="Config" data-id="Config"><a class="anchor hidden-xs" href="#Config" title="Config"><span class="octicon octicon-link"></span></a><span>Config</span></h3><p><a href="https://www.pynote.net/archives/2930" target="_blank" rel="noopener"><span>參考這篇: 用flake8检查python代码</span></a></p><p><span>Flake8它是支持將個人設定保存在配置文件裡面的，我們可以通過以setup.cfg, tox.ini, 或者.flake8以上三種文件形式保存配置。</span><br>
<span>(三種文件名稱都可以使用)</span></p><p><span>永久路徑: Linux flake8 path: ~/.config/flake8 (是檔案不是資料夾)</span><br>
<img src="https://i.imgur.com/CAFx3Rw.png" alt="" loading="lazy"></p><pre><code>[flake8]
ignore = E203,E225,E226,E231,W391
max-complexity = 10
exclude = .git,__pycache__,README.md,LICENSE
</code></pre><p><span>推薦 .flake8</span></p><pre><code>[flake8]
ignore =
    # W503: Line break occurred before a binary operator
    W503,
    # E501: Line too long
    E501,
max-line-length = 88
</code></pre><p><span>max-line-length: 每行最長長度（這裡設定的 88，是後面會介紹到的 black 的預設值）</span><br>
<span>本來 flake8 預設是 79</span></p><p><a href="https://pypi.org/project/flake8-per-file-ignores/" target="_blank" rel="noopener"><span>flake8-per-file-ignores</span></a><br>
<a href="https://github.com/snoack/flake8-per-file-ignores/blob/master/test/setup.cfg" target="_blank" rel="noopener"><span>snoack/flake8-per-file-ignores</span></a></p><pre><code>[flake8]
per-file-ignores =
  # There is no E302 violation in this file, the line violating F401
  # has a noqa comment and the F821 if already covered by F8,
  # so we get an X100 for redundantly listing these errors here.
  /foo.py: E711,E302,F401,F821,F8

  # There is no E302 in this file either, but here we ignore X100 as well.
  # Since there is no leading slash, it matches both bar.py in the top-level
  # as well as subdir/bar.py.
  bar.py: F821,E302,X100

  # The glob pattern matches two files with a different violation in each file.
  # We would only get an X100 if a given error doesn't occur in either file.
  /subdir/*/foo_?.py: E712,F821
</code></pre><h3 id="Error-message-分類" data-id="Error-message-分類"><a class="anchor hidden-xs" href="#Error-message-分類" title="Error-message-分類"><span class="octicon octicon-link"></span></a><span>Error message 分類</span></h3><p><a href="https://kknews.cc/zh-tw/tech/9yx6mp5.html" target="_blank" rel="noopener"><span>Reference</span></a></p><p><span>Flake8 基礎錯誤返回碼一共有三類：</span></p><ol>
<li><ins><span>E***/W***</span></ins><span>: PEP8中的error和warning。</span></li>
<li><ins><span>F***</span></ins><span>: 通過PyFlakes檢測出的error，其實PyFlakes本身是不提供錯誤返回碼的，flake8對pyflakes返回的錯誤消息進行了分類。</span></li>
<li><ins><span>C9**</span></ins><span>: 通過McCabe檢測出的代碼複雜度。</span><br>
<span>Flake8提供一個擴展選項：–max-complexity，如果函數的McCabe複雜度比給定的值更高將發出一個警告</span></li>
</ol><h4 id="常見錯誤" data-id="常見錯誤"><a class="anchor hidden-xs" href="#常見錯誤" title="常見錯誤"><span class="octicon octicon-link"></span></a><span>常見錯誤</span></h4><p><a href="https://lintlyci.github.io/Flake8Rules/" target="_blank" rel="noopener"><span>參考好用網站</span></a></p><p><span>個人認為可忽略error: E203,E225,E226,E231,W391</span></p><ul>
<li>
<p><ins><strong><span>E203: Whitespace before ‘:’</span></strong></ins><br>
<img src="https://i.imgur.com/zENs5UL.png" alt="" loading="lazy"></p>
</li>
<li>
<p><ins><strong><span>E225: Missing whitespace around operator</span></strong></ins><br>
<img src="https://i.imgur.com/bQ1QsGo.png" alt="" loading="lazy"></p>
</li>
<li>
<p><ins><strong><span>E226: Missing whitespace around arithmetic operator</span></strong></ins><br>
<img src="https://i.imgur.com/kBpwhgT.png" alt="" loading="lazy"></p>
</li>
<li>
<p><ins><strong><span>E231: Missing whitespace after ‘,’, ‘;’, or ‘:’</span></strong></ins><br>
<img src="https://i.imgur.com/u5ly5hx.png" alt="" loading="lazy"></p>
</li>
<li>
<p><ins><strong><span>W391: blank line at end of file</span></strong></ins><br>
<img src="https://i.imgur.com/NztFgA5.png" alt="" loading="lazy"></p>
</li>
</ul><h3 id="局部跳過檢查" data-id="局部跳過檢查"><a class="anchor hidden-xs" href="#局部跳過檢查" title="局部跳過檢查"><span class="octicon octicon-link"></span></a><span>局部跳過檢查</span></h3><p><span>一種狀況是，我們只想在讓一兩行程式碼跳過 flake8 的檢查</span><br>
<span>但這份檔案的其他地方還是希望能被檢查</span><br>
<span>這時候可以在那行程式碼加上 # noqa: [error]</span></p><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span></div><div class="code">example = <span class="hljs-keyword">lambda</span>: <span class="hljs-string">'example'</span>  <span class="hljs-comment"># noqa: E731</span>
</div></div></code></pre><h3 id="Example" data-id="Example"><a class="anchor hidden-xs" href="#Example" title="Example"><span class="octicon octicon-link"></span></a><span>Example</span></h3><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span></div><div class="code"><span class="hljs-keyword">import</span> os
os = <span class="hljs-string">"My Operating system"</span>
</div></div></code></pre><p><img src="https://i.imgur.com/zRgddUW.png" alt="" loading="lazy"></p><p><span>把模組 os 指派成一個字串，會導致無法使用 os 模組內的函式（因為 os 已經變成一個字串）</span></p><p><span>透過這個錯誤碼（e.g., F811）可以在 </span><a href="https://www.flake8rules.com/" target="_blank" rel="noopener"><span>flake8 rules</span></a><span> 找到為什麼這是個錯誤和怎麼修正比較好</span></p><h3 id="Error-with-install-flake8-on-linux1604" data-id="Error-with-install-flake8-on-linux1604"><a class="anchor hidden-xs" href="#Error-with-install-flake8-on-linux1604" title="Error-with-install-flake8-on-linux1604"><span class="octicon octicon-link"></span></a><span>Error with install flake8 on linux16.04</span></h3><p><span>flake **.py</span></p><pre><code>/usr/lib/python3/dist-packages/pep8.py:109: FutureWarning: Possible nested set at position 1
EXTRANEOUS_WHITESPACE_REGEX = re.compile(r'[[({] | []}),;:]')
</code></pre><p><a href="https://www.scivision.dev/python37-extraneous-whitespace-regex-pycodestyle-fix/" target="_blank" rel="noopener"><span>參考這篇解決的 Sloved: Python FutureWarning whitespace regex</span></a></p><h2 id="Black" data-id="Black"><a class="anchor hidden-xs" href="#Black" title="Black"><span class="octicon octicon-link"></span></a><span>Black</span></h2><p><a href="https://black.readthedocs.io/en/stable/usage_and_configuration/the_basics.html" target="_blank" rel="noopener"><span>Foundational knowledge on using and configuring Black.</span></a><br>
<a href="https://blog.csdn.net/cumian9828/article/details/108097334" target="_blank" rel="noopener"><span>python black_如何使用Black自动格式化Python代码</span></a></p><div class="alert alert-success">
<p><span>Black reformats entire files in place.</span><br>
<span>Style configuration options are deliberately limited and rarely added.</span><br>
<span>It doesn’t take previous formatting into account, except for the magic trailing comma and preserving newlines.</span></p>
</div><ul>
<li><span>Black requires Python 3.6+   該工具只支持 Python3.6 環境</span></li>
</ul><table>
<thead>
<tr>
<th><span>Option</span></th>
<th><span>Description</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>–check</span></td>
<td><span>Don’t write the files back, just return the status.</span></td>
</tr>
<tr>
<td><span>–diff</span></td>
<td><span>Don’t write the files back, just output a diff for each file on stdout.</span></td>
</tr>
<tr>
<td><span>-l, --line-length INTEGER</span></td>
<td><span>How many characters per line to allow.[default: 88]</span></td>
</tr>
<tr>
<td><span>–fast / --safe</span></td>
<td><span>If --fast given, skip temporary sanity checks. [default: --safe]</span></td>
</tr>
<tr>
<td><span>-S</span></td>
<td><span>Don’t normalize string quotes or prefixes</span></td>
</tr>
<tr>
<td><span>-t, --target-version</span></td>
<td><span>Python versions that should be supported by Black’s output. [default: per-file auto-detection]</span></td>
</tr>
<tr>
<td><span>–config</span></td>
<td><span>Read configuration from PATH.</span></td>
</tr>
</tbody>
</table><p><span>-t: 選定black 改完後的code 可以支援哪種py版本。</span><br>
<span>可選: [py27|py33|py34|py35|py36|py37|py38]</span></p><h3 id="Disadvantage" data-id="Disadvantage"><a class="anchor hidden-xs" href="#Disadvantage" title="Disadvantage"><span class="octicon octicon-link"></span></a><span>Disadvantage</span></h3><p><span>Style configuration options are deliberately limited and rarely added.</span><br>
<span>–&gt; 有些人不喜歡用 black 就是因為 </span><a href="https://www.dongwm.com/post/why-i-dont-like-black/" target="_blank" rel="noopener"><span>可選用的參數較少</span></a></p><h4 id="ex1-double-quotes-or-single-quotes" data-id="ex1-double-quotes-or-single-quotes"><a class="anchor hidden-xs" href="#ex1-double-quotes-or-single-quotes" title="ex1-double-quotes-or-single-quotes"><span class="octicon octicon-link"></span></a><span>ex1: double quotes or single quotes?</span></h4><p><span>默認 black 要求你必須用雙引號把字符串包起來，而不是單引號</span><br>
<span>-S 參數可以解決</span></p><table>
<thead>
<tr>
<th><span>Option</span></th>
<th><span>Description</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>-S, --skip-string-normalization</span></td>
<td><span>Don’t normalize string quotes or prefixes.</span></td>
</tr>
</tbody>
</table><h4 id="ex2-import-的多行输出模式" data-id="ex2-import-的多行输出模式"><a class="anchor hidden-xs" href="#ex2-import-的多行输出模式" title="ex2-import-的多行输出模式"><span class="octicon octicon-link"></span></a><span>ex2: import 的多行输出模式</span></h4><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span></div><div class="code"><span class="hljs-keyword">from</span> sansa.models.consts <span class="hljs-keyword">import</span> (
    BLACKLIST_GROUP_ID, BANNED_GROUP_IDS, TAG_REC_POOL,
    STORY_TAG_HOME_REC_BANNED, HOME_REC_BANNED_TAG_NAME)
</div></div></code></pre><p><span>會被 black format 成</span></p><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span></div><div class="code"><span class="hljs-keyword">from</span> sansa.models.consts <span class="hljs-keyword">import</span> (
    BLACKLIST_GROUP_ID,
    BANNED_GROUP_IDS,
    TAG_REC_POOL,
    STORY_TAG_HOME_REC_BANNED,
    HOME_REC_BANNED_TAG_NAME,
)
</div></div></code></pre><p><span>格式化後 HOME_REC_BANNED_TAG_NAME 行尾添加了逗號</span></p><h3 id="Configuration-via-a-file" data-id="Configuration-via-a-file"><a class="anchor hidden-xs" href="#Configuration-via-a-file" title="Configuration-via-a-file"><span class="octicon octicon-link"></span></a><span>Configuration via a file</span></h3><ul>
<li><ins><span>Where Black looks for the pyproject.toml file</span></ins><span>¶</span><br>
<span>By default Black looks for pyproject.toml starting from the common base directory of all files and directories passed on the command line. If it’s not there, it looks in parent directories. It stops looking when it finds the file, or a .git directory, or a .hg directory, or the root of the file system, whichever comes first.</span></li>
</ul><p><span>兩種方法:</span></p><p><span>(1) 任何資料夾/目錄下 使用 </span><strong><span>pyproject.toml</span></strong><span> 去配置自己 Black 的 config file.</span><br>
<span>(2) 全域設定的話， 使用這個檔案: PATH: ~/.config/black</span></p><div class="alert alert-info">
<p><span>[tool.black]</span><br>
<span>line-length = 88</span><br>
<span>target-version = [‘py37’]</span></p>
</div><p><a href="https://www.python.org/dev/peps/pep-0518/" target="_blank" rel="noopener"><span>PEP 518</span></a><span> defines </span><strong><span>pyproject.toml as a configuration file to store build system requirements for Python projects.</span></strong></p><h2 id="Pylint" data-id="Pylint"><a class="anchor hidden-xs" href="#Pylint" title="Pylint"><span class="octicon octicon-link"></span></a><span>Pylint</span></h2><p><span>pylint 同樣是相當常見的 Python linter。</span><br>
<span>一般來說，比 flake8 檢查的更加嚴格</span></p><h3 id="Error" data-id="Error"><a class="anchor hidden-xs" href="#Error" title="Error"><span class="octicon octicon-link"></span></a><span>Error</span></h3><p><a href="https://www.youtube.com/?gl=TW&amp;hl=zh-tw" target="_blank" rel="noopener"><span>pylint-errors</span></a></p><ul>
<li><ins><strong><span>C0114 missing-module-docstring</span></strong></ins></li>
</ul><h2 id="McCabe" data-id="McCabe"><a class="anchor hidden-xs" href="#McCabe" title="McCabe"><span class="octicon octicon-link"></span></a><span>McCabe</span></h2><p><a href="https://kinegratii.github.io/2018/04/08/cyclomatic-complexity-and-mccabe/" target="_blank" rel="noopener"><span>Cyclomatic Complexity 和 McCabe</span></a></p><div class="alert alert-success">
<p><span>Cyclomatic Complexity – 圈複查度</span><br>
<span>是衡量程式碼複雜程度的一種方法</span></p>
</div><p><span>對於沒有任何分支的程式，它的圈複雜度為1 ，意味著程式只有一條路徑。</span><br>
<span>例如下面的函數：</span></p><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>):</span>
    <span class="hljs-keyword">return</span> a + b
</code></pre><p><span>對於有一條分支的程式，它的圈複雜度為2。</span><br>
<span>比如下面遞歸計算階乘的代碼：</span></p><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">factorial</span>(<span class="hljs-params">n</span>):</span>
    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> n * factorial(n-<span class="hljs-number">1</span>)
</code></pre><p><span>可用指令 check mcCabe</span></p><pre><code>python3 -m mccabe xxx.py
</code></pre><h2 id="Pyflakes" data-id="Pyflakes"><a class="anchor hidden-xs" href="#Pyflakes" title="Pyflakes"><span class="octicon octicon-link"></span></a><span>Pyflakes</span></h2><div class="alert alert-success">
<p><span>Pyflakes: 程式碼邏輯和語法檢查</span><br>
<span>如果你使用的 Vim 或者記事本來寫程式碼，那麼可以用 Pyflakes 來檢查程式碼是不是有語法錯誤或者邏輯錯誤。</span></p>
</div><p><strong><span>Pyflakes 不會檢查程式碼的風格， 只會看語法錯誤 or 邏輯錯誤。</span></strong></p><p><a href="https://medium.com/ccclub/ccclub-python-for-beginners-tutorial-edd15e2b5d1e" target="_blank" rel="noopener"><span>錯誤與例外處理</span></a><br>
<a href="https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/360203/" target="_blank" rel="noopener"><span>Python 錯誤和異常程式碼詳解</span></a></p><h3 id="SyntaxError-語法錯誤" data-id="SyntaxError-語法錯誤"><a class="anchor hidden-xs" href="#SyntaxError-語法錯誤" title="SyntaxError-語法錯誤"><span class="octicon octicon-link"></span></a><span>SyntaxError 語法錯誤</span></h3><p><a href="https://www.coursera.org/lecture/pbc1/02-08-chu-cuo-yu-cheng-shi-xie-zuo-liu-cheng-OLvCU" target="_blank" rel="noopener"><span>影片講解 兩大Error : SyntaxError / LogicError</span></a></p><p><span>以 Python 來說，一般而言 SyntaxError 之所以會發生通常會來自於以下幾個可能性：</span></p><ol>
<li><span>遺漏了某些必要的符號（冒號、逗號或括號）</span></li>
<li><span>關鍵字拼寫錯誤</span></li>
<li><span>縮排不正確</span></li>
<li><span>空語句塊（需要用 pass 語句）</span></li>
</ol><h3 id="LogicError-邏輯錯誤" data-id="LogicError-邏輯錯誤"><a class="anchor hidden-xs" href="#LogicError-邏輯錯誤" title="LogicError-邏輯錯誤"><span class="octicon octicon-link"></span></a><span>LogicError 邏輯錯誤</span></h3><ol>
<li><span>運算子優先順序考慮不周</span></li>
<li><span>變數名使用不正確</span></li>
<li><span>語句塊縮排層次不對</span></li>
<li><span>在布林表示式中出錯</span></li>
</ol><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">average</span>(<span class="hljs-params">a, b</span>):</span>
    <span class="hljs-keyword">return</span> a + b / <span class="hljs-number">2</span> <span class="hljs-comment"># 應為 (a + b) / 2</span>
</div></div></code></pre><p><span>雖然程式能夠正常執行，但程式碼中缺少括號，由於運算子優先順序（先乘除，後加減）的緣故，運算結果並不正確。</span></p><h4 id="RuntimeError-執行錯誤" data-id="RuntimeError-執行錯誤"><a class="anchor hidden-xs" href="#RuntimeError-執行錯誤" title="RuntimeError-執行錯誤"><span class="octicon octicon-link"></span></a><span>RuntimeError 執行錯誤</span></h4><ol>
<li><span>使用未定義的識別符號（NameError）</span></li>
<li><span>除數為 0（ZeroDivisionError）</span></li>
<li><span>開啟的檔案不存在（FileNotFoundError）</span></li>
<li><span>匯入的模組沒被找到（ImportError）</span></li>
</ol><p><img src="https://i.imgur.com/Jv95ZHX.png" alt="" loading="lazy"></p><p><span>Python 執行過程</span></p><p><img src="https://i.imgur.com/Q9qBvZU.png" alt="" loading="lazy"></p><h2 id="Mypy" data-id="Mypy"><a class="anchor hidden-xs" href="#Mypy" title="Mypy"><span class="octicon octicon-link"></span></a><span>Mypy</span></h2><p><span>Mypy是Python的靜態類型檢查器，也就是檢查Python各類變量是否類型正確的一個工具。</span></p><p><a href="https://www.coder.work/article/6935815" target="_blank" rel="noopener"><span>導入自己的包錯誤</span></a></p><div class="alert alert-success">
<p><span>error: Cannot find implementation or library stub for module named ‘</span><a href="http://src.xxx" target="_blank" rel="noopener"><span>src.xxx</span></a><span>’</span></p>
</div><p><span>原因: mypy不會嘗試對導入的每個模塊進行類型檢查。相反，它僅嘗試對已經明確選擇加入類型生態系統的模塊進行類型檢查。</span></p><ol>
<li><span>創立自己的 library</span></li>
<li><a href="https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports" target="_blank" rel="noopener"><span>Missing imports</span></a></li>
</ol><p><span>&lt;setup.cfg&gt;</span></p><pre><code>[flake8]                                                                                   
ignore=
    # E501: Line too long
    W501

[mypy]
ignore_missing_imports = true

</code></pre><h2 id="Import-tool" data-id="Import-tool"><a class="anchor hidden-xs" href="#Import-tool" title="Import-tool"><span class="octicon octicon-link"></span></a><span>Import tool</span></h2><h3 id="isort" data-id="isort"><a class="anchor hidden-xs" href="#isort" title="isort"><span class="octicon octicon-link"></span></a><span>isort</span></h3><p><a href="https://pythonrepo.com/repo/PyCQA-isort-python-general-utilities" target="_blank" rel="noopener"><span>isort</span></a><span> is a Python utility / library to sort imports alphabetically, and automatically separated into sections and by type.</span></p><p><span>isort 可自動對 Python的 import語句進行排序和分段。</span><br>
<span>可將大量的 import結構轉成符合pep8 rule 且適合閱讀的排版。</span></p><pre><code>isort --check import_error.py   # 只會告訴你有沒有 Error
isort --diff import_error.py    # 列出差異
</code></pre><h3 id="autoflake" data-id="autoflake"><a class="anchor hidden-xs" href="#autoflake" title="autoflake"><span class="octicon octicon-link"></span></a><span>autoflake</span></h3><p><a href="https://github.com/myint/autoflake" target="_blank" rel="noopener"><span>autoflake</span></a><span> 從 python 程式中删除未使用的import 和 未使用的變數</span><br>
<span>By default, </span><strong><span>autoflake only removes unused imports for modules that are part of the standard library.</span></strong><br>
<span>(Other modules may have side effects that make them unsafe to remove automatically.)</span></p><pre><code>autoflake  xxx.py  # 列出修改的地方，但尚未幫你修改
autoflake --remove-all-unused-imports --remove-unused-variables xxx.py
autoflake -i xxx.py  # 會直接修改檔案
</code></pre><h2 id="Gitlab---Hook" data-id="Gitlab---Hook"><a class="anchor hidden-xs" href="#Gitlab---Hook" title="Gitlab---Hook"><span class="octicon octicon-link"></span></a><span>Gitlab - Hook</span></h2><p><a href="https://ithelp.ithome.com.tw/articles/10195737?sc=iThomeR" target="_blank" rel="noopener"><span>[2018 iThome 鐵人賽] Day 15: 嘗試在 Python 中做到 Golang fmt 的效果</span></a></p><p><span>寫在 .git/hooks/pre-commit</span></p><div class="alert alert-danger">
<p><span>#Run syntax checker and formatter for Python files.</span><br>
<span>STAGED_PYTHON_FILES=$(git diff --cached --name-only HEAD “*.py”)</span></p>
<p><span>if [ “$STAGED_PYTHON_FILES” != “” ]</span><br>
<span>then</span><br>
<span>autoflake -i --remove-all-unused-imports --remove-unused-variables $STAGED_PYTHON_FILES</span><br>
<span>isort -y $STAGED_PYTHON_FILES</span><br>
<span>yapf -i $STAGED_PYTHON_FILES</span><br>
<span>git add $STAGED_PYTHON_FILES</span><br>
<span>fi</span></p>
</div><h2 id="pre-commit" data-id="pre-commit"><a class="anchor hidden-xs" href="#pre-commit" title="pre-commit"><span class="octicon octicon-link"></span></a><span>pre-commit</span></h2><p><a href="https://mropengate.blogspot.com/2019/08/pre-commit-git-hooks_4.html" target="_blank" rel="noopener"><span>提升程式碼品質：使用 Pre-Commit (Git Hooks)</span></a></p><p><span>A framework for managing and maintaining multi-language pre-commit hooks.</span></p><p><span>在程式碼 commit 進 branch 之前，如果能在 local 端阻擋一些低級失誤，就可以大大提升開發品質，在專案中使用 pre-commit 有以下好處</span></p><ul>
<li><span>自動化檢查程式碼排版規範快速又有效率（如 python PEP8）</span></li>
<li><span>低級的問題不會進到 code review</span></li>
<li><span>低級的問題不會進到 CI/CD pipeline</span></li>
</ul><pre><code>pre-commit run --all-files
</code></pre><h3 id="Quick-start" data-id="Quick-start"><a class="anchor hidden-xs" href="#Quick-start" title="Quick-start"><span class="octicon octicon-link"></span></a><span>Quick start</span></h3><h4 id="step1-Install-pre-commit" data-id="step1-Install-pre-commit"><a class="anchor hidden-xs" href="#step1-Install-pre-commit" title="step1-Install-pre-commit"><span class="octicon octicon-link"></span></a><span>step1. Install pre-commit</span></h4><p><span>pre-commit --version should show you what version you’re using</span></p><p><img src="https://i.imgur.com/8658qYu.png" alt="" loading="lazy"></p><h4 id="step2-Add-a-pre-commit-configuration" data-id="step2-Add-a-pre-commit-configuration"><a class="anchor hidden-xs" href="#step2-Add-a-pre-commit-configuration" title="step2-Add-a-pre-commit-configuration"><span class="octicon octicon-link"></span></a><span>step2. Add a pre-commit configuration</span></h4><p><span>create a file named .pre-commit-config.yaml</span><br>
<span>需要設定的只有 .pre-commit-config.yaml 這個 config 檔，將它置於專案下（也就是和 .git 同一層）即可，他的基礎格式如下：</span></p><pre><code>repos:
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v2.3.0
    hooks:
    -   id: check-yaml
    -   id: end-of-file-fixer
    -   id: trailing-whitespace
-   repo: https://github.com/psf/black
    rev: 19.3b0
    hooks:
    -   id: black
</code></pre><p><span>pre-commit 整理了將常見並較為通用的 hook 都被整理在 </span><a href="https://github.com/pre-commit/pre-commit-hooks" target="_blank" rel="noopener"><span>pre-commit-hooks</span></a></p><p><span>參數說明</span></p><ul>
<li><span>repos 告訴 pre-commit 要去哪邊找到這些 hook</span></li>
<li><span>repo: 去找專案 pre-commit-hooks</span></li>
<li><span>rev: 在專案 pre-commit-hooks 找到 rev v2.3.0</span></li>
<li><span>hooks: 在 pre-commit-hooks rev v2.3.0 的 .pre-commit-hooks.yaml 中尋找指定的 hook</span></li>
<li><span>id: hook id</span></li>
<li><span>args: 執行這個 hook 的額外參數</span></li>
</ul><h4 id="step3-Install-the-git-hook-scripts" data-id="step3-Install-the-git-hook-scripts"><a class="anchor hidden-xs" href="#step3-Install-the-git-hook-scripts" title="step3-Install-the-git-hook-scripts"><span class="octicon octicon-link"></span></a><span>step3. Install the git hook scripts</span></h4><p><span>run </span><strong><span>pre-commit install</span></strong><span> to set up the git hook scripts</span></p><h3 id="使用自定義的-pre-commit-hook" data-id="使用自定義的-pre-commit-hook"><a class="anchor hidden-xs" href="#使用自定義的-pre-commit-hook" title="使用自定義的-pre-commit-hook"><span class="octicon octicon-link"></span></a><span>使用自定義的 pre-commit hook</span></h3><p><a href="https://zh-tw.coderbridge.com/series/66cb226274ea4d349abd49d2aef44037/posts/25dbe7d486ed453eb314ca25b069bac9" target="_blank" rel="noopener"><span>Python Table Manners - pre-commit: git commit 前做完檢查</span></a></p><p><span>除了使用現成的 pre-commit hook，也可以寫客製化的檢查。</span><br>
<span>下面的例子就是在 commit 前，要進行 pytest 的檢查</span></p><pre><code>-   repo: local
    hooks:
    -   id: pytest
        name: pytest
        stages: [commit]
        language: system
        entry: pytest
        pass_filenames: false
        types: [python]
</code></pre><h4 id="參數說明" data-id="參數說明"><a class="anchor hidden-xs" href="#參數說明" title="參數說明"><span class="octicon octicon-link"></span></a><span>參數說明</span></h4><ul>
<li><span>repo: local: 直接在本地資料夾執行</span></li>
<li><span>hooks: 有哪些 hook 要執行</span></li>
<li><span>id, name: hook 的 id / name 是 pytest</span></li>
<li><span>stages: 在 commit 前執行</span></li>
<li><span>language: 直接使用系統執行 entry 內的指令</span></li>
<li><span>entry: 這個 hook 要執行的指令是 pytest</span></li>
<li><span>types: 只有在 python 這種檔案類型才進行檢查</span></li>
<li><span>pass_filenames: 是否要將 commit 的檔案名稱作為 entry 中指令的參數</span></li>
</ul><h3 id="Example1" data-id="Example"><a class="anchor hidden-xs" href="#Example1" title="Example1"><span class="octicon octicon-link"></span></a><span>Example</span></h3><p><span>.pre-commit-config.yaml</span></p><pre><code>repos:
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v2.3.0
    hooks:
    -   id: check-yaml
    -   id: end-of-file-fixer
    -   id: trailing-whitespace
    -   id: check-added-large-files
    -   id: check-docstring-first
-   repo: https://github.com/psf/black
    rev: 19.3b0
    hooks:
    -   id: black

-   repo: https://gitlab.com/PyCQA/flake8
    rev: 3.8.3
    hooks:
    -   id: flake8

-   repo: https://github.com/pre-commit/mirrors-mypy
    rev: v0.761                                                                            
    hooks:
    -   id: mypy

-   repo: local
    hooks:
    -   id: pytest
        name: pytest
        stages: [commit]
        language: system
        entry: pytest
        pass_filenames: false
        types: [python]
</code></pre><h2 id="變數-命名規則" data-id="變數-命名規則"><a class="anchor hidden-xs" href="#變數-命名規則" title="變數-命名規則"><span class="octicon octicon-link"></span></a><span>變數 命名規則</span></h2><p><a href="https://blog.camel2243.com/2020/06/10/%E5%B8%B8%E8%A6%8B%E7%9A%84%E5%91%BD%E5%90%8D%E8%A6%8F%E5%89%87camel-case-snake-case-kebab-case/" target="_blank" rel="noopener"><span>常見的命名規則(Camel Case, Snake Case, Kebab Case)</span></a></p><h3 id="Camel-Case" data-id="Camel-Case"><a class="anchor hidden-xs" href="#Camel-Case" title="Camel-Case"><span class="octicon octicon-link"></span></a><span>Camel Case</span></h3><p><span>因為單字的開頭大寫，看起來像是駝峰</span><br>
<span>可以進一步細分為 upper camel case (BrowserStack) 與 lower camel case (iPhone)，差別在於開頭第一個字是否為大寫。</span><br>
<span>另外，因為 upper camel case 又稱為 Pascal Case，因此有部分人泛指 Camel Case 為 lower camel case。</span></p><h3 id="Snake-Case" data-id="Snake-Case"><a class="anchor hidden-xs" href="#Snake-Case" title="Snake-Case"><span class="octicon octicon-link"></span></a><span>Snake Case</span></h3><p><span>簡單來說是用 _ 來分隔單字的命名規則，像是 fibonacci_sequence</span><br>
<span>起源來自 Ruby 社群的一句討論</span></p><pre><code>BTW…what *do* you call that naming style? snake_case?
That’s what I’ll call it until someone corrects me.
</code></pre><h3 id="Kebab-Case" data-id="Kebab-Case"><a class="anchor hidden-xs" href="#Kebab-Case" title="Kebab-Case"><span class="octicon octicon-link"></span></a><span>Kebab Case</span></h3><p><span>簡單來說是用 - 來分隔單字的命名規則，像是 fibonacci-sequence</span><br>
<span>有許多另外的別稱 spinal-case,Train-Case,Lisp-case</span></p><hr><h1 id="Pytest" data-id="Pytest"><a class="anchor hidden-xs" href="#Pytest" title="Pytest"><span class="octicon octicon-link"></span></a><span>Pytest</span></h1><p><a href="https://medium.com/drunk-wis/python-%E7%94%A8-pytest-%E4%BE%86%E5%81%9A-unit-test-7e1a7ac599f6" target="_blank" rel="noopener"><span>[Python] 用 Pytest 來做 Unit Test</span></a><br>
<a href="https://zh-tw.coderbridge.com/series/66cb226274ea4d349abd49d2aef44037/posts/9fb680151c5e4bf38ab35eebd0a35c4b" target="_blank" rel="noopener"><span>可看這篇: Python Table Manners - 測試</span></a></p><p><span>Pytest是一款強大的Python測試工具，支援平行化測試，使用上簡單方便，適合用在各種不同類型的軟體架構，也適用於RD、QA或獨立測試小組，也適合正要導入TDD的公司。</span></p><p><img src="https://i.imgur.com/TSS78yi.png" alt="" loading="lazy"></p><ul>
<li><span>使用 pytest -v 或是 pytest --verbose 會得到以下結果</span></li>
</ul><p><img src="https://i.imgur.com/risxeWH.png" alt="" loading="lazy"></p><h2 id="Example2" data-id="Example"><a class="anchor hidden-xs" href="#Example2" title="Example2"><span class="octicon octicon-link"></span></a><span>Example</span></h2><p><a href="https://myapollo.com.tw/zh-tw/pytest/" target="_blank" rel="noopener"><span>pytest 教學</span></a></p><p><span>pytest 如何執行測試，pytest 遵循標準的 test discovery rules ，幾點要領：</span></p><ul>
<li><span>檔名必須是符合 test_*.py 或 *_test.py</span></li>
<li><span>類別名稱必須是 </span><code>Test</code><span> 開頭</span></li>
<li><span>函數與類別內的方法都必須要 test_ 做為 prefix</span></li>
</ul><p><span>會檢查 test 資料夾下 開頭為 test 的檔案</span></p><p><img src="https://i.imgur.com/kgekDY5.png" alt="" loading="lazy"></p><h3 id="常用-CML-參數" data-id="常用-CML-參數"><a class="anchor hidden-xs" href="#常用-CML-參數" title="常用-CML-參數"><span class="octicon octicon-link"></span></a><span>常用 CML 參數</span></h3><ul>
<li><span>-v (-vv, -vvv): 顯示更多資訊 （越多 v 就會顯示越多資訊，verbose 冗長的 msg）</span></li>
<li><span>–durations=N: 只列出最慢的 N 個測試</span></li>
<li><span>-x (–exitfirst): 遇到第一個失敗就終止測試</span></li>
<li><span>–maxfail=num: 失敗次數達到 num 次，直接終止測試</span></li>
<li><span>–lf (–last-failed): 只測試上次失敗的案例</span></li>
<li><span>–ff (–failed-first): 從上次失敗的案例開始測試</span></li>
<li><span>–nf --new-first: 從新的案例開始測試</span></li>
<li><span>-k EXPRESSION: 只測試名稱符合 “EXPRESIION” 的案例</span></li>
<li><span>-m MARKEXPR: 只測試有 “MARKEXPR” maker 的案例</span></li>
<li><span>–fixtures: 列出所有 fixtures</span></li>
</ul><h3 id="pytest-例外測試" data-id="pytest-例外測試"><a class="anchor hidden-xs" href="#pytest-例外測試" title="pytest-例外測試"><span class="octicon octicon-link"></span></a><span>pytest 例外測試</span></h3><ul>
<li><span>test_mytest1(): 意思是要用 pytest.raises 捕捉到 ValueError 這個 Error</span></li>
<li><span>test_mytest2(): 要用 assert 測試func(1) 是不是抓不到例外錯誤</span></li>
</ul><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span></div><div class="code"><span class="hljs-keyword">import</span> pytest

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">if</span> x==<span class="hljs-number">0</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"value error!"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">pass</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_mytest1</span>():</span>
    <span class="hljs-keyword">with</span> pytest.raises(ValueError):
        func(<span class="hljs-number">0</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_mytest2</span>():</span>
    <span class="hljs-keyword">assert</span> func(<span class="hljs-number">1</span>) ==<span class="hljs-literal">None</span> 
</div></div></code></pre><h3 id="pytest-不同參數傳遞測試" data-id="pytest-不同參數傳遞測試"><a class="anchor hidden-xs" href="#pytest-不同參數傳遞測試" title="pytest-不同參數傳遞測試"><span class="octicon octicon-link"></span></a><span>pytest 不同參數傳遞測試</span></h3><div class="alert alert-warning">
<p><span>@pytest.mark.parametrize(argnames, argvalues)  #參數化</span></p>
</div><ul>
<li><span>第一個參數: 指定測試函式要使用的參數名稱</span></li>
<li><span>第二個參數: 測試資料的陣列</span></li>
</ul><p><span>在測試資料比較簡單的時候，可以使用 </span><a href="https://docs.pytest.org/en/latest/how-to/parametrize.html" target="_blank" rel="noopener"><span>parameterize</span></a><span> 來減少撰寫重複的程式碼</span></p><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span></div><div class="code"><span class="hljs-keyword">import</span> pytest

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">x,y</span>):</span>
    <span class="hljs-keyword">return</span> x+y 

<span class="hljs-meta">@pytest.mark.parametrize(<span class="hljs-params">
    <span class="hljs-string">"x,y,expected"</span>,
    [   
        (<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span></span>),
        (<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span></span>),
        (<span class="hljs-params"><span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">20</span></span>)
    ]   
</span>)</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_add</span>(<span class="hljs-params">x,y,expected</span>):</span>
    <span class="hljs-keyword">assert</span> add(x,y) == expected
</div></div></code></pre><p><span>跑的時候可以看到執行了 3次 的測試</span></p><p><img src="https://i.imgur.com/JhVhU2k.png" alt="" loading="lazy"></p><h3 id="pytest-maker" data-id="pytest-maker"><a class="anchor hidden-xs" href="#pytest-maker" title="pytest-maker"><span class="octicon octicon-link"></span></a><span>pytest maker</span></h3><p><a href="https://doc.pytest.org/en/latest/example/markers.html" target="_blank" rel="noopener"><span>marker</span></a></p><p><span>可以通過命令列檢視所有marker，包括內建和自定義的</span></p><pre><code>pytest --markers
</code></pre><h4 id="自訂義-maker" data-id="自訂義-maker"><a class="anchor hidden-xs" href="#自訂義-maker" title="自訂義-maker"><span class="octicon octicon-link"></span></a><span>自訂義 maker</span></h4><div class="alert alert-info">
<p><span>@pytest.mark.slow</span><br>
<span>def test_super_slow_test():</span><br>
<span>sleep(3)</span></p>
</div><p><span>在命令列通過-m指定 執行mark打標的 test</span></p><pre><code>pytest -v -m slow
</code></pre><p><strong><span>PytestUnknownMarkWarning</span></strong><br>
<span>執行時會被警告，因為定義的marker是未註冊的</span></p><h4 id="解決-為定義-warning" data-id="解決-為定義-warning"><a class="anchor hidden-xs" href="#解決-為定義-warning" title="解決-為定義-warning"><span class="octicon octicon-link"></span></a><span>解決 為定義 warning</span></h4><p><span>可以在pytest.ini檔案中註冊，冒號後面的所有程式碼都是marker說明，包括換行</span></p><div class="alert alert-success">
<p><span>[pytest]</span><br>
<span>markers =</span><br>
<span>slow: marks tests as slow (deselect with ‘-m “not slow”’)</span></p>
</div><h4 id="pytest-分組測試" data-id="pytest-分組測試"><a class="anchor hidden-xs" href="#pytest-分組測試" title="pytest-分組測試"><span class="octicon octicon-link"></span></a><span>pytest 分組測試</span></h4><p><span>測試方法分為不同得測試組，測試時可以單獨測試某個組的方法。</span></p><p><span>pytest.ini (先在這裡定義分組組別)</span></p><div class="alert alert-info">
<p><span>[pytest]</span><br>
<span>markers =</span><br>
<span>g1: group1.</span><br>
<span>g2: group2.</span></p>
</div><p><img src="https://i.imgur.com/BnuHlQQ.png" alt="" loading="lazy"></p><h5 id="測試範例" data-id="測試範例"><a class="anchor hidden-xs" href="#測試範例" title="測試範例"><span class="octicon octicon-link"></span></a><span>測試範例</span></h5><p><span>test_marker.py code:</span></p><pre><code>@pytest.mark.g1
def test_func1():
    pass

@pytest.mark.g2
def test_func2():
    pass

@pytest.mark.g1
def test_func3():
    pass

@pytest.mark.g2
def test_func4():
    pass

@pytest.mark.g1
def test_func5():
    pass
</code></pre><h5 id="執行範例" data-id="執行範例"><a class="anchor hidden-xs" href="#執行範例" title="執行範例"><span class="octicon octicon-link"></span></a><span>執行範例:</span></h5><p><span>代表僅執行 group 為 g1 組別的function</span></p><pre><code>pytest -vv test_maker.py -m g1
</code></pre><p><img src="https://i.imgur.com/DwGt8Zf.png" alt="" loading="lazy"></p><h2 id="Coverage" data-id="Coverage"><a class="anchor hidden-xs" href="#Coverage" title="Coverage"><span class="octicon octicon-link"></span></a><span>Coverage</span></h2><p><a href="https://myapollo.com.tw/zh-tw/pytest-coverage/" target="_blank" rel="noopener"><span>Python pytest 整合 coverage</span></a></p><p><span>軟體測試的覆蓋率(coverage)也是衡量測試品質的其中一項重要指標，如果是使用 pytest 作為測試框架(framework)的話，可以安裝 pytest-cov 衡量覆蓋率的高低。</span></p><pre><code>pip install pytest-cov
</code></pre><h3 id="Argument" data-id="Argument"><a class="anchor hidden-xs" href="#Argument" title="Argument"><span class="octicon octicon-link"></span></a><span>Argument</span></h3><p><span>指令的意思為執行 ./ 資料夾(目前dir)底下的所有測試，衡量當前路徑下的測試覆蓋率，然後將結果產出為 html 格式，結果會儲存在 htmlcov 這個新增的資料夾。</span></p><ul>
<li><span>–cov=[SOURCE]: 測試包含的程式碼範圍</span></li>
<li><span>–cov-report=TYPE: 測試覆蓋率報告的種類 (term, term-missing, annotate, html, xml)</span></li>
<li><span>–cov-fail-under=MIN: 如果覆蓋率小於 MIN 則跳出</span></li>
</ul><pre><code>pytest --cov=./
pytest --cov=./ --cov-report=html
pytest --cov=src/ --cov-report=term-missing  test/test_sample.py
</code></pre><h4 id="coveragerc-設定檔" data-id="coveragerc-設定檔"><a class="anchor hidden-xs" href="#coveragerc-設定檔" title="coveragerc-設定檔"><span class="octicon octicon-link"></span></a><span>.coveragerc 設定檔</span></h4><p><span>有時候有些程式其實不需要衡量覆蓋率。</span><br>
<span>譬如 </span><strong><span>init</span></strong><span>.py 一般都會是空的，如果我們希望將它在報告中排除，就可以用 .coveragerc 設定檔進行排除，以下是 .coveragerc 的範例：</span></p><pre><code>[run]
omit = 
    */__init__.py
</code></pre><p><img src="https://i.imgur.com/rxCZMkt.png" alt="" loading="lazy"></p><h1 id="Unittest" data-id="Unittest"><a class="anchor hidden-xs" href="#Unittest" title="Unittest"><span class="octicon octicon-link"></span></a><span>Unittest</span></h1><p><span>Python 內建 unittest，無需另外安裝。</span></p><ul>
<li><span>使用 unittest 步驟</span></li>
</ul><ol>
<li><span>建立繼承自 TestCase 的類別</span></li>
<li><span>建立與測試程式命名相似的方法，自首加上 test_ ，然後利用 TestCase 的類別之測試方法進行測試。</span></li>
<li><span>呼叫 unittest.main()，跑出測試結果。</span></li>
</ol><h2 id="Run-method" data-id="Run-method"><a class="anchor hidden-xs" href="#Run-method" title="Run-method"><span class="octicon octicon-link"></span></a><span>Run method</span></h2><pre><code>python3 -m unittest 
[-h] [-v] [-q] [--locals] [-f] [-c] [-b] [-k TESTNAMEPATTERNS] [tests [tests ...]]
</code></pre><p><span>Examples:</span></p><table>
<thead>
<tr>
<th><span>Command</span></th>
<th><span>Description</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>python3 -m unittest test_module</span></td>
<td><span>- run tests from test_module</span></td>
</tr>
<tr>
<td><span>python3 -m unittest module.TestClass</span></td>
<td><span>- run tests from module.TestClass</span></td>
</tr>
<tr>
<td><span>python3 -m unittest module.Class.test_method</span></td>
<td><span>- run specified test method</span></td>
</tr>
<tr>
<td><span>python3 -m unittest path/to/test_file.py</span></td>
<td><span>- run tests from test_file.py</span></td>
</tr>
</tbody>
</table><h2 id="unittest測試框架" data-id="unittest測試框架"><a class="anchor hidden-xs" href="#unittest測試框架" title="unittest測試框架"><span class="octicon octicon-link"></span></a><span>unittest測試框架</span></h2><p><span>unittest框架中最核心四個元件概念</span></p><h3 id="1TestCase" data-id="1TestCase"><a class="anchor hidden-xs" href="#1TestCase" title="1TestCase"><span class="octicon octicon-link"></span></a><span>1.TestCase</span></h3><p><span>測試用例類，編寫測試用例指令碼時需要繼承該類，從而具有該類的屬性和方法，一個TestCase例項就是一個測試用例，其中</span><strong><span>測試用例方法都以test開頭。</span></strong></p><h4 id="assert-斷言" data-id="assert-斷言"><a class="anchor hidden-xs" href="#assert-斷言" title="assert-斷言"><span class="octicon octicon-link"></span></a><span>assert 斷言</span></h4><p><span>無論是什麼樣的測試用例，最後都需要有用例執行後的驗證。</span><br>
<span>The </span><a href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.debug" target="_blank" rel="noopener"><span>TestCase class</span></a><span> provides several assert methods to check for and report failures. The following table lists the most commonly used methods (see the tables below for more assert methods):</span></p><table>
<thead>
<tr>
<th><span>Name</span></th>
<th><span>Description</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>assertEqual(a,b)</span></td>
<td><span>a==b</span></td>
</tr>
<tr>
<td><span>assertNotEqual(a,b)</span></td>
<td><span>a!=b</span></td>
</tr>
<tr>
<td><span>assertTrue(x)</span></td>
<td><span>bool(x) is True</span></td>
</tr>
<tr>
<td><span>assertFalse(x)</span></td>
<td><span>bool(x) is False</span></td>
</tr>
<tr>
<td><span>assertIs(a,b)</span></td>
<td><span>a is b</span></td>
</tr>
<tr>
<td><span>assertIsNot(a,b)</span></td>
<td><span>a is not b</span></td>
</tr>
<tr>
<td><span>assertIsNone(x)</span></td>
<td><span>x is None</span></td>
</tr>
<tr>
<td><span>assertIn(a,b)</span></td>
<td><span>a in b</span></td>
</tr>
<tr>
<td><span>assertNotIn(a,b)</span></td>
<td><span>a not in b</span></td>
</tr>
<tr>
<td><span>assertIsInstance(a,b)</span></td>
<td><span>isinstance(a,b)</span></td>
</tr>
<tr>
<td><span>assertNotIsInstance(a,b)</span></td>
<td><span>not isinstance(a,b)</span></td>
</tr>
</tbody>
</table><h3 id="2TestSuite" data-id="2TestSuite"><a class="anchor hidden-xs" href="#2TestSuite" title="2TestSuite"><span class="octicon octicon-link"></span></a><span>2.TestSuite</span></h3><p><span>測試集，也就是測試用例的集合，用來組織用例。</span></p><h3 id="3testrunner" data-id="3testrunner"><a class="anchor hidden-xs" href="#3testrunner" title="3testrunner"><span class="octicon octicon-link"></span></a><span>3.testrunner</span></h3><p><span>用來執行測試用例，並返回測試用例的執行結果，可以用圖形或者文字將測試結果形象地展現出來，HTMLTestRunner用來生成圖形化的報告，TextTestRunner用來生成簡單的文字測試結果。</span></p><p><span>testrunner就是用來執行測試用例的，並且可以生成相應的測試報告。</span><br>
<span>測試報告有兩種展示形式，一種是text文字，一種是html格式。</span></p><h3 id="4testfixure" data-id="4testfixure"><a class="anchor hidden-xs" href="#4testfixure" title="4testfixure"><span class="octicon octicon-link"></span></a><span>4.testfixure</span></h3><p><strong><span>用於一個測試環境的準備和銷燬還原</span></strong><br>
<span>當測試用例每次執行之前需要準備測試環境，每次測試完成後還原測試環境，比如執行前連線資料庫、開啟瀏覽器等，執行完成後需要還原資料庫、關閉瀏覽器等操作。這時候就可以啟用testfixture。</span></p><p><span>測試夾件提供兩種方法</span></p><ol>
<li><span>一種是類級別的：setup(）和teardown()</span></li>
<li><span>一種是方法級別的：setUpClass()和tearDownClass()</span></li>
</ol><h3 id="Example3" data-id="Example"><a class="anchor hidden-xs" href="#Example3" title="Example3"><span class="octicon octicon-link"></span></a><span>Example</span></h3><p><span>稍微分段說明一下下面程式:</span></p><ul>
<li><span>setUp : 方法是測試前執行，這邊我是先去取(定義) num1 跟 num2</span></li>
<li><span>tearDown : 方法是測試後執行</span></li>
<li><span>test_xxx : 所有要加入測試的方法，前綴都要加上 test，而最後我用了 assertEqual 方法，需要提供測試預期結果以及計算結果，會判斷兩者是否相同</span></li>
<li><span>unittest.main() : 用此方法來執行所有測試</span></li>
</ul><pre><code>import unittest
from src.calc import add, substract


class TestCal(unittest.TestCase):
    def setUp(self):
        self.num1 = 10
        self.num2 = 4
    
    def tearDown(self):
        pass

    def test_add(self):
        result = add(self.num1, self.num2)
        self.assertEqual(result, 14)

    def test_sub(self):
        result = substract(self.num1, self.num2)                                                                                                                                      
        self.assertEqual(result, 6)


if __name__ == "__main__":
    unittest.main()
</code></pre><p><a href="https://zh-tw.coderbridge.com/series/f3b902082a0e4d01b31afd632be79175/posts/d0e051b04b61421d87399059c73dfdcd" target="_blank" rel="noopener"><span>Python unittest 單元測試 | 專案應用分享</span></a></p><h2 id="Mock" data-id="Mock"><a class="anchor hidden-xs" href="#Mock" title="Mock"><span class="octicon octicon-link"></span></a><span>Mock</span></h2><p><a href="http://puremonkey2010.blogspot.com/2017/08/python-mock-python-unit-test.html" target="_blank" rel="noopener"><span>用 Mock 來做 Python Unit Test</span></a></p><p><img src="https://i.imgur.com/tEj0dSb.png" alt="" loading="lazy"></p><p><span>程式設計師可以藉由偽造的物件來替換要執行的部份程式，這樣的作法可以使得測試的目標變得更明確並且與其他程式獨立開來，不會因為其他沒有通過測試的物件而影響到現在測試的目標</span></p><ul>
<li><a href="http://example.py" target="_blank" rel="noopener"><span>example.py</span></a></li>
</ul><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span>
<span></span>
<span></span></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func1</span>(<span class="hljs-params">x</span>):</span>  
    <span class="hljs-keyword">return</span> x**<span class="hljs-number">2</span>  
  
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func2</span>(<span class="hljs-params">x</span>):</span>  
    <span class="hljs-keyword">return</span> func1(x) + x*<span class="hljs-number">5</span>  
</div></div></code></pre><p><span>在 example 這個模組中 func2 中 會呼叫 func1 並加上 x*5 然後回傳結果，如果要對 func2 做單元測試時，要先確定 func1 這支函式是正確如預期的運作，test_func2 中的 assertEqual 才能成立。</span></p><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span></div><div class="code"><span class="hljs-keyword">import</span> unittest  
<span class="hljs-keyword">from</span> unittest <span class="hljs-keyword">import</span> mock  
<span class="hljs-keyword">from</span> example <span class="hljs-keyword">import</span> func1, func2  
  
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleTest</span>(<span class="hljs-params">unittest.TestCase</span>):</span>  
    <span class="hljs-string">"""Test example for mocking  
    """</span>  
<span class="hljs-meta">    @mock.patch(<span class="hljs-params"><span class="hljs-string">'example.func1'</span></span>)  </span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_func2</span>(<span class="hljs-params">self, mock_func1</span>):</span>  
        mock_func1.return_value = <span class="hljs-number">0</span>  
        self.assertEqual(func2(<span class="hljs-number">5</span>), <span class="hljs-number">25</span>)  
        mock_func1.return_value = <span class="hljs-number">10</span>  
        self.assertEqual(func2(-<span class="hljs-number">5</span>), -<span class="hljs-number">15</span>)  
</div></div></code></pre><h3 id="MagicMock" data-id="MagicMock"><a class="anchor hidden-xs" href="#MagicMock" title="MagicMock"><span class="octicon octicon-link"></span></a><span>MagicMock</span></h3><p><span>MagicMock 是 Mock 的 subclass，他預先幫我們處理了 python 中的 magic method。</span></p><h2 id="Other" data-id="Other"><a class="anchor hidden-xs" href="#Other" title="Other"><span class="octicon octicon-link"></span></a><span>Other</span></h2><h3 id="1" data-id="1"><a class="anchor hidden-xs" href="#1" title="1"><span class="octicon octicon-link"></span></a><span>1</span></h3><p><a href="https://www.codenong.com/1896918" target="_blank" rel="noopener"><span>关于python：使用典型的测试目录结构运行unittest</span></a></p><ol>
<li><span>可以測試 module test_unittest1.py</span></li>
</ol><pre><code>python3 -m unittest test.test_unittest1
</code></pre><ol start="2">
<li><span>可以測試單個 TestCase</span></li>
</ol><pre><code>python3 -m unittest test.test_unittest1.TestCal
</code></pre><p><span>我的目錄結構如下:</span></p><pre><code>├── main.py
├── README.md
├── setup.cfg
├── src
│&nbsp;&nbsp; ├── calc.py
│&nbsp;&nbsp; ├── func.py
│&nbsp;&nbsp;     
└── test
    ├── __init__.py
    ├── test_sample.py
    └── test_unittest1.py
</code></pre><p><span>test 資料夾中 不要忘記加入 </span><strong><span>init</span></strong><span>.py</span></p><p><img src="https://i.imgur.com/D9ObLxE.png" alt="" loading="lazy"></p><h3 id="2" data-id="2"><a class="anchor hidden-xs" href="#2" title="2"><span class="octicon octicon-link"></span></a><span>2</span></h3><p><span>透過 unittest.main() 可以執行同一 module 裡所有的 test case。</span></p><pre><code>if __name__ == '__main__':
    unittest.main()
</code></pre><ul>
<li><span>有 unittest.main() 的話可以直接 python3 xxx_test.py</span></li>
<li><span>沒有的話要下 python3 -m unittest xxx_test.py</span></li>
</ul><p><span>unittest 執行需要 unittest.main()，這個 function 作用是將一個 unittest module 變成可以直接執行的測試腳本</span></p><h1 id="Packages" data-id="Packages"><a class="anchor hidden-xs" href="#Packages" title="Packages"><span class="octicon octicon-link"></span></a><span>Packages</span></h1><p><a href="https://medium.com/pyladies-taiwan/python-%E7%9A%84-import-%E9%99%B7%E9%98%B1-3538e74f57e3" target="_blank" rel="noopener"><span>Python 的 Import 陷阱</span></a></p><p><span>基本上一個檔案就是一個 module，裡頭可以定義 function，class，和 variable。</span><br>
<span>把一個 module 想成一個檔案，那一個package就是一個目錄了。</span><br>
<span>Package 可裝有 subpackage 和 module，讓你的專案更條理更組織化，最後一坨打包好還能分給別人使用。</span></p><p><span>新增那個 </span><strong><strong><span>init</span></strong><span>.py 檔</span></strong><span>。</span><br>
<span>它是空的沒關係，但一定要有，有點宣稱自己是一個 package 的味道。</span></p><h2 id="Import" data-id="Import"><a class="anchor hidden-xs" href="#Import" title="Import"><span class="octicon octicon-link"></span></a><span>Import</span></h2><p><span>Absolute Import v.s. Relative Import</span></p><p><span>Python 有兩種 import 方法， absolute import 及 relative import</span></p><ol>
<li><span>Absolute import 就是完整使用 module 路徑</span></li>
<li><span>Relative import 則是使用以當前 package為參考的相對路徑。</span></li>
</ol><div class="alert alert-info">
<p><span>Relative import 的需求在於，有時候在改變專案架構的時候，裡面的 package 和 module 會拉來拉去，這時候如果這些 package 裡面使用的是relative import 的話，他們的相對關係就不會改變，也就是不需要再一一進入 module 裡更改路徑。</span></p>
</div><p><span>這邊參考</span><a href="https://www.python.org/dev/peps/pep-0328/#guido-s-decision" target="_blank" rel="noopener"><span>PEP328</span></a><span>提供的範例。</span><br>
<span>Package 架構如下：</span></p><pre><code>package
├── __init__.py
├── subpackage1
│   ├── __init__.py
│   ├── moduleX.py
│   └── moduleY.py
├── subpackage2
│   ├── __init__.py
│   └── moduleZ.py
└── moduleA.py
</code></pre><h2 id="Import-problem" data-id="Import-problem"><a class="anchor hidden-xs" href="#Import-problem" title="Import-problem"><span class="octicon octicon-link"></span></a><span>Import problem</span></h2><p><a href="https://zhuanlan.zhihu.com/p/64893308" target="_blank" rel="noopener"><span>Python-import導入上級目錄文件</span></a><br>
<span>舉個範例說明</span></p><p><span>dir0 </span><a href="http://xn--file1-bi1h228d7swy4cqu1l.py" target="_blank" rel="noopener"><span>資料夾下有file1.py</span></a><span>、</span><a href="http://file2.py" target="_blank" rel="noopener"><span>file2.py</span></a><span> 兩個文件和 dir3、dir4兩個子資料夾，dir3中有file3.py文件，dir4中有file4.py文件</span></p><p><img src="https://i.imgur.com/8CHsQF6.png" alt="" loading="lazy"></p><ol>
<li><span>導入同層 module</span><br>
<a href="http://xn--file1-8w2in4l.xn--pyfile2-h43kh3vyx2a14l.py" target="_blank" rel="noopener"><span>如在file1.py中想導入file2.py</span></a></li>
</ol><pre><code>import file2
</code></pre><ol start="2">
<li><span>導入下層 module</span><br>
<span>需在下層目錄中新建一個空白的__init__.py文件再導入</span></li>
</ol><pre><code>from dirname import xxx
</code></pre><ol start="3">
<li><span>導入上層module</span></li>
</ol><p><span>要導入上層目錄下模塊，可以使用sys.path</span></p><p><span>如在 </span><a href="http://file4.py" target="_blank" rel="noopener"><span>file4.py</span></a><span> 中想引入import上層目錄下的 </span><a href="http://file1.py" target="_blank" rel="noopener"><span>file1.py</span></a></p><pre><code>import sys 
sys.path.append("..") 
import file1
</code></pre><p><strong><span>sys.path的作用：</span></strong><br>
<span>"…"的含義：實際上python中的’.'也和linux中一致，表示當前目錄</span></p><ol start="4">
<li><span>導入隔壁資料夾下的 module</span></li>
</ol><p><span>如在 </span><a href="http://file4.py" target="_blank" rel="noopener"><span>file4.py</span></a><span> 中想引入import在dir3目錄下的 </span><a href="http://file3.py" target="_blank" rel="noopener"><span>file3.py</span></a><span>。</span></p><p><span>這其實是前面兩個操作的組合，其思路本質上是將上級目錄加到sys.path裡，再按照對下級目錄模塊的方式導入。</span></p><p><span>同樣需要被引文件夾也就是dir3下有空的__init__.py文件</span></p><p><img src="https://i.imgur.com/Xkinfbd.png" alt="" loading="lazy"></p><pre><code>import sys
sys.path.append("..")
from dir3 import file3
</code></pre><style>
.blue {
  color: blue;
}
.green {
  color: green;
}
.red {
  color: red;
}
</style></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li><a href="#PEP8-Tool" title="PEP8 Tool">PEP8 Tool</a><ul class="nav">
<li><a href="#Standard-Format" title="Standard Format">Standard Format</a></li>
<li><a href="#Compare" title="Compare">Compare</a></li>
<li><a href="#Flake8" title="Flake8">Flake8</a><ul class="nav">
<li><a href="#Config" title="Config">Config</a></li>
<li><a href="#Error-message-分類" title="Error message 分類">Error message 分類</a></li>
<li><a href="#局部跳過檢查" title="局部跳過檢查">局部跳過檢查</a></li>
<li><a href="#Example" title="Example">Example</a></li>
<li><a href="#Error-with-install-flake8-on-linux1604" title="Error with install flake8 on linux16.04">Error with install flake8 on linux16.04</a></li>
</ul>
</li>
<li><a href="#Black" title="Black">Black</a><ul class="nav">
<li><a href="#Disadvantage" title="Disadvantage">Disadvantage</a></li>
<li><a href="#Configuration-via-a-file" title="Configuration via a file">Configuration via a file</a></li>
</ul>
</li>
<li><a href="#Pylint" title="Pylint">Pylint</a><ul class="nav">
<li><a href="#Error" title="Error">Error</a></li>
</ul>
</li>
<li><a href="#McCabe" title="McCabe">McCabe</a></li>
<li><a href="#Pyflakes" title="Pyflakes">Pyflakes</a><ul class="nav">
<li><a href="#SyntaxError-語法錯誤" title="SyntaxError 語法錯誤">SyntaxError 語法錯誤</a></li>
<li><a href="#LogicError-邏輯錯誤" title="LogicError 邏輯錯誤">LogicError 邏輯錯誤</a></li>
</ul>
</li>
<li><a href="#Mypy" title="Mypy">Mypy</a></li>
<li><a href="#Import-tool" title="Import tool">Import tool</a><ul class="nav">
<li><a href="#isort" title="isort">isort</a></li>
<li><a href="#autoflake" title="autoflake">autoflake</a></li>
</ul>
</li>
<li><a href="#Gitlab---Hook" title="Gitlab - Hook">Gitlab - Hook</a></li>
<li><a href="#pre-commit" title="pre-commit">pre-commit</a><ul class="nav">
<li><a href="#Quick-start" title="Quick start">Quick start</a></li>
<li><a href="#使用自定義的-pre-commit-hook" title="使用自定義的 pre-commit hook">使用自定義的 pre-commit hook</a></li>
<li><a href="#Example1" title="Example">Example</a></li>
</ul>
</li>
<li><a href="#變數-命名規則" title="變數 命名規則">變數 命名規則</a><ul class="nav">
<li><a href="#Camel-Case" title="Camel Case">Camel Case</a></li>
<li><a href="#Snake-Case" title="Snake Case">Snake Case</a></li>
<li><a href="#Kebab-Case" title="Kebab Case">Kebab Case</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Pytest" title="Pytest">Pytest</a><ul class="nav">
<li><a href="#Example2" title="Example">Example</a><ul class="nav">
<li><a href="#常用-CML-參數" title="常用 CML 參數">常用 CML 參數</a></li>
<li><a href="#pytest-例外測試" title="pytest 例外測試">pytest 例外測試</a></li>
<li><a href="#pytest-不同參數傳遞測試" title="pytest 不同參數傳遞測試">pytest 不同參數傳遞測試</a></li>
<li><a href="#pytest-maker" title="pytest maker">pytest maker</a></li>
</ul>
</li>
<li><a href="#Coverage" title="Coverage">Coverage</a><ul class="nav">
<li><a href="#Argument" title="Argument">Argument</a></li>
</ul>
</li>
</ul>
</li>
<li class=""><a href="#Unittest" title="Unittest">Unittest</a><ul class="nav">
<li><a href="#Run-method" title="Run method">Run method</a></li>
<li class=""><a href="#unittest測試框架" title="unittest測試框架">unittest測試框架</a><ul class="nav">
<li><a href="#1TestCase" title="1.TestCase">1.TestCase</a></li>
<li><a href="#2TestSuite" title="2.TestSuite">2.TestSuite</a></li>
<li><a href="#3testrunner" title="3.testrunner">3.testrunner</a></li>
<li><a href="#4testfixure" title="4.testfixure">4.testfixure</a></li>
<li class=""><a href="#Example3" title="Example">Example</a></li>
</ul>
</li>
<li><a href="#Mock" title="Mock">Mock</a><ul class="nav">
<li><a href="#MagicMock" title="MagicMock">MagicMock</a></li>
</ul>
</li>
<li><a href="#Other" title="Other">Other</a><ul class="nav">
<li><a href="#1" title="1">1</a></li>
<li><a href="#2" title="2">2</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Packages" title="Packages">Packages</a><ul class="nav">
<li><a href="#Import" title="Import">Import</a></li>
<li><a href="#Import-problem" title="Import problem">Import problem</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">全部展開</a><a class="back-to-top" href="#">回到頂部</a><a class="go-to-bottom" href="#">移至底部</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li><a href="#PEP8-Tool" title="PEP8 Tool">PEP8 Tool</a><ul class="nav">
<li><a href="#Standard-Format" title="Standard Format">Standard Format</a></li>
<li><a href="#Compare" title="Compare">Compare</a></li>
<li><a href="#Flake8" title="Flake8">Flake8</a><ul class="nav">
<li><a href="#Config" title="Config">Config</a></li>
<li><a href="#Error-message-分類" title="Error message 分類">Error message 分類</a></li>
<li><a href="#局部跳過檢查" title="局部跳過檢查">局部跳過檢查</a></li>
<li><a href="#Example" title="Example">Example</a></li>
<li><a href="#Error-with-install-flake8-on-linux1604" title="Error with install flake8 on linux16.04">Error with install flake8 on linux16.04</a></li>
</ul>
</li>
<li><a href="#Black" title="Black">Black</a><ul class="nav">
<li><a href="#Disadvantage" title="Disadvantage">Disadvantage</a></li>
<li><a href="#Configuration-via-a-file" title="Configuration via a file">Configuration via a file</a></li>
</ul>
</li>
<li><a href="#Pylint" title="Pylint">Pylint</a><ul class="nav">
<li><a href="#Error" title="Error">Error</a></li>
</ul>
</li>
<li><a href="#McCabe" title="McCabe">McCabe</a></li>
<li><a href="#Pyflakes" title="Pyflakes">Pyflakes</a><ul class="nav">
<li><a href="#SyntaxError-語法錯誤" title="SyntaxError 語法錯誤">SyntaxError 語法錯誤</a></li>
<li><a href="#LogicError-邏輯錯誤" title="LogicError 邏輯錯誤">LogicError 邏輯錯誤</a></li>
</ul>
</li>
<li><a href="#Mypy" title="Mypy">Mypy</a></li>
<li><a href="#Import-tool" title="Import tool">Import tool</a><ul class="nav">
<li><a href="#isort" title="isort">isort</a></li>
<li><a href="#autoflake" title="autoflake">autoflake</a></li>
</ul>
</li>
<li><a href="#Gitlab---Hook" title="Gitlab - Hook">Gitlab - Hook</a></li>
<li><a href="#pre-commit" title="pre-commit">pre-commit</a><ul class="nav">
<li><a href="#Quick-start" title="Quick start">Quick start</a></li>
<li><a href="#使用自定義的-pre-commit-hook" title="使用自定義的 pre-commit hook">使用自定義的 pre-commit hook</a></li>
<li><a href="#Example1" title="Example">Example</a></li>
</ul>
</li>
<li><a href="#變數-命名規則" title="變數 命名規則">變數 命名規則</a><ul class="nav">
<li><a href="#Camel-Case" title="Camel Case">Camel Case</a></li>
<li><a href="#Snake-Case" title="Snake Case">Snake Case</a></li>
<li><a href="#Kebab-Case" title="Kebab Case">Kebab Case</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Pytest" title="Pytest">Pytest</a><ul class="nav">
<li><a href="#Example2" title="Example">Example</a><ul class="nav">
<li><a href="#常用-CML-參數" title="常用 CML 參數">常用 CML 參數</a></li>
<li><a href="#pytest-例外測試" title="pytest 例外測試">pytest 例外測試</a></li>
<li><a href="#pytest-不同參數傳遞測試" title="pytest 不同參數傳遞測試">pytest 不同參數傳遞測試</a></li>
<li><a href="#pytest-maker" title="pytest maker">pytest maker</a></li>
</ul>
</li>
<li><a href="#Coverage" title="Coverage">Coverage</a><ul class="nav">
<li><a href="#Argument" title="Argument">Argument</a></li>
</ul>
</li>
</ul>
</li>
<li class=""><a href="#Unittest" title="Unittest">Unittest</a><ul class="nav">
<li><a href="#Run-method" title="Run method">Run method</a></li>
<li class=""><a href="#unittest測試框架" title="unittest測試框架">unittest測試框架</a><ul class="nav">
<li><a href="#1TestCase" title="1.TestCase">1.TestCase</a></li>
<li><a href="#2TestSuite" title="2.TestSuite">2.TestSuite</a></li>
<li><a href="#3testrunner" title="3.testrunner">3.testrunner</a></li>
<li><a href="#4testfixure" title="4.testfixure">4.testfixure</a></li>
<li class=""><a href="#Example3" title="Example">Example</a></li>
</ul>
</li>
<li><a href="#Mock" title="Mock">Mock</a><ul class="nav">
<li><a href="#MagicMock" title="MagicMock">MagicMock</a></li>
</ul>
</li>
<li><a href="#Other" title="Other">Other</a><ul class="nav">
<li><a href="#1" title="1">1</a></li>
<li><a href="#2" title="2">2</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Packages" title="Packages">Packages</a><ul class="nav">
<li><a href="#Import" title="Import">Import</a></li>
<li><a href="#Import-problem" title="Import problem">Import problem</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">全部展開</a><a class="back-to-top" href="#">回到頂部</a><a class="go-to-bottom" href="#">移至底部</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
