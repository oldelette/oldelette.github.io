<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Docker &amp; Kubernetes - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.figma{display:table;position:relative;width:100%;padding-bottom:56.25%}.figma iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;border:1px solid #eee}.MJX_Assistive_MathML{display:none}#MathJax_Message{z-index:1000!important}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:50%;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-more-info{color:#888;cursor:pointer;vertical-align:middle}.ui-more-info .fa{font-size:16px}.ui-connectedGithub,.ui-published-note{color:#888}.ui-connectedGithub{line-height:23px;white-space:nowrap}.ui-connectedGithub a.file-path{color:#888;text-decoration:none;padding-left:22px}.ui-connectedGithub a.file-path:active,.ui-connectedGithub a.file-path:hover{color:#888;text-decoration:underline}.ui-connectedGithub .fa{font-size:20px}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em;font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true"><h6 id="tags-Internet" data-id="tags-Internet"><a class="anchor hidden-xs" href="#tags-Internet" title="tags-Internet"><span class="octicon octicon-link"></span></a><span>tags: </span><code>Internet</code></h6><h1 id="Docker-amp-Kubernetes" data-id="Docker-amp-Kubernetes"><a class="anchor hidden-xs" href="#Docker-amp-Kubernetes" title="Docker-amp-Kubernetes"><span class="octicon octicon-link"></span></a><span>Docker &amp; Kubernetes</span></h1><p><a href="https://ithelp.ithome.com.tw/articles/10192401" target="_blank" rel="noopener"><span>Kubernetes 是一個協助我們自動化部署、擴張以及管理容器應用程式(containerized applications)的系統。</span></a><br>
<span>相較於需要手動部署每個容器化應用程式(containers)到每台機器上，Kubernetes 可以幫我們做到以下幾件事情：</span></p><ol>
<li><span>同時部署多個 containers 到一台機器上，甚至多台機器。</span></li>
<li><span>管理各個 container 的狀態。如果提供某個服務的 container 不小心 crash 了，Kubernetes 會偵測到並重啟這個 container，確保持續提供服務</span></li>
<li><span>將一台機器上所有的 containers 轉移到另外一台機器上。</span></li>
<li><span>提供機器高度擴張性。Kubernetes cluster 可以從一台機器，延展到多台機器共同運行。</span></li>
</ol><h2 id="Container-Runtime-Interface-CRI" data-id="Container-Runtime-Interface-CRI"><a class="anchor hidden-xs" href="#Container-Runtime-Interface-CRI" title="Container-Runtime-Interface-CRI"><span class="octicon octicon-link"></span></a><span>Container Runtime Interface (CRI)</span></h2><p><a href="https://ithelp.ithome.com.tw/articles/10218127" target="_blank" rel="noopener"><span>Kubernetes 為了能夠有效地銜接各式各樣不同的 Container Runtime 解決方案</span></a><span>，勢必也需要推出相關的標準，就如同 Container OCI 一樣，符合標準的解決方案就能夠輕鬆的整合到 kubernetes 之中。</span><br>
<span>於是 Container Runtime Interface(CRI) 標準就被設計且開發來</span></p><ul>
<li><span>表格列出了 kubernetes 與 CRI Runtime 各自的責任</span></li>
</ul><table>
<thead>
<tr>
<th><span>Kubernetes</span></th>
<th><span>CRI Runtime</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>Kubernetes Resources/API</span></td>
<td><span>Pod Life Cycle (Add/Delete)</span></td>
</tr>
<tr>
<td><span>Storage (CSI)</span></td>
<td><span>Image management</span></td>
</tr>
<tr>
<td><span>Networking (CNI)</span></td>
<td><span>Status</span></td>
</tr>
<tr>
<td><span>Dispatcher</span></td>
<td><span>Container Operations (attatch/exec)</span></td>
</tr>
</tbody>
</table><h3 id="CRI-架構" data-id="CRI-架構"><a class="anchor hidden-xs" href="#CRI-架構" title="CRI-架構"><span class="octicon octicon-link"></span></a><span>CRI 架構</span></h3><p><span>CRI 本身是個</span><mark><span>溝通介面</span></mark><span>，這代表溝通的兩方(Docker &amp; Kubernetes)都需要根據這個界面去實現與滿足。</span></p><p><span>最直觀的想法就是如果沒有辦法使得 docker 本身支援 CRI 的標準，那就</span><strong><span>額外撰寫一個轉接器(dockershim)</span></strong><span>，其運作在 kubelet 與 Docker，該應用程式上承 CRI 與 kubernetes 溝通，下承 Docker API 與 Docker Engine 溝通。</span></p><p><span>問題: 做法可行，但是其實效能大大則扣</span><br>
<span>圖中的上半部份，而圖中的下半部分則是後來的改變之處</span></p><p><img src="https://i.imgur.com/WKum4Tp.png" alt="" loading="lazy"></p><p><span>反正最後都是透過 containerd 進行操作，而本身也不太需要 docker 自己的功能，那是否就直接將 dockershim 溝通的角色從 docker engine 轉移到 containerd 即可。 因此後來又有所謂的 CRI-Containerd 的出現。</span></p><p><span>伴隨者 Containerd 本身的功能開發，提供了 Plugin 這種外掛功能的特色後，將 CRI-Containerd 的功能直接整合到該 Plugin 內就可以直接再次減少一個元件，直接讓 kubelet 與 containerd 直接溝通來創建相關的 container。</span><br>
<img src="https://i.imgur.com/ou2vzXG.png" alt="" loading="lazy"></p><h2 id="Kubernetes-四元件" data-id="Kubernetes-四元件"><a class="anchor hidden-xs" href="#Kubernetes-四元件" title="Kubernetes-四元件"><span class="octicon octicon-link"></span></a><span>Kubernetes 四元件</span></h2><p><span>在了解 Kubernetes 如何幫助我們管理容器們前，我們先要由小到大依序了解組成 Kubernetes 的四種</span><a href="https://cwhu.medium.com/kubernetes-basic-concept-tutorial-e033e3504ec0" target="_blank" rel="noopener"><span>最基本的元件：Pod、Worker Node、Master Node、Cluster。</span></a></p><h3 id="Pod" data-id="Pod"><a class="anchor hidden-xs" href="#Pod" title="Pod"><span class="octicon octicon-link"></span></a><span>Pod</span></h3><p><span>Kubernetes 運作的最小單位，一個 Pod 對應到一個應用服務（Application） ，舉例來說一個 Pod 可能會對應到一個 API Server。</span></p><ul>
<li><span>每個 Pod 都有一個身分證，也就是屬於這個 Pod 的 </span><ins><span>yaml 檔</span></ins></li>
<li><span>一個 Pod 裡面可以有一個或是多個 Container，但一般情況一個 Pod 最好只有一個 Container</span></li>
<li><span>同一個 Pod 中的 Containers 共享相同資源及網路，彼此透過 local port number 溝通</span></li>
</ul><h3 id="Worker-Node" data-id="Worker-Node"><a class="anchor hidden-xs" href="#Worker-Node" title="Worker-Node"><span class="octicon octicon-link"></span></a><span>Worker Node</span></h3><p><span>Kubernetes 運作的最小硬體單位，一個 Worker Node（簡稱 Node）對應到一台機器，可以是實體機如你的筆電、或是虛擬機如 AWS 上的一台 EC2 或 GCP 上的一台 Computer Engine。</span></p><p><span>每個 Node 中都有三個組件：kubelet、kube-proxy、Container Runtime。</span></p><h3 id="Master-Node" data-id="Master-Node"><a class="anchor hidden-xs" href="#Master-Node" title="Master-Node"><span class="octicon octicon-link"></span></a><span>Master Node</span></h3><p><span>Kubernetes 運作的指揮中心，可以簡化看成一個特化的 Node 負責管理所有其他 Node。</span><br>
<span>一個 Master Node（簡稱 Master）中有四個組件：kube-apiserver、etcd、kube-scheduler、kube-controller-manager。</span></p><h3 id="Cluster" data-id="Cluster"><a class="anchor hidden-xs" href="#Cluster" title="Cluster"><span class="octicon octicon-link"></span></a><span>Cluster</span></h3><p><span>Kubernetes 中多個 Node 與 Master 的集合。基本上可以想成在同一個環境裡所有 Node 集合在一起的單位。</span></p><h2 id="安裝-Kubernetes" data-id="安裝-Kubernetes"><a class="anchor hidden-xs" href="#安裝-Kubernetes" title="安裝-Kubernetes"><span class="octicon octicon-link"></span></a><span>安裝 Kubernetes</span></h2><p><span>Docker 內建有包含 Kubernetes 單機叢集環境, 預設並沒有啟用</span></p><p><img src="https://i.imgur.com/SLb278f.png" alt="" loading="lazy"></p><ul>
<li><span>確認安裝成功</span></li>
</ul><pre><code>kubectl version --short 
</code></pre><p><img src="https://i.imgur.com/hgcl2TC.png" alt="" loading="lazy"></p><h1 id="Docker" data-id="Docker"><a class="anchor hidden-xs" href="#Docker" title="Docker"><span class="octicon octicon-link"></span></a><span>Docker</span></h1><p><a href="https://medium.com/@jinghua.shih/container-%E6%A6%82%E5%BF%B5%E7%AD%86%E8%A8%98-b0963ae2d7c6" target="_blank" rel="noopener"><span>Docker 是一個讓 Container 標準化的專案 /工具。</span></a><br>
<span>Kubernetes 是用來管理 Container 的系統。</span><br>
<span>Microservice(微服務) 是基於 Container 之上快速發展起來的概念。</span></p><pre><code>Container 作為一個概念，本身背後則有一個相關的標準在支持與制定 (Open Container Initiative)
docker 作為一個 Container 的解決方案
</code></pre><ol>
<li><span>Docker 想解決的問題：</span><br>
<span>改善傳統虛擬機器因為需要額外安裝作業系統（Guest OS），導致啟動慢、佔較大記憶體的問題</span></li>
<li><span>Docker 要提供的解法：</span><br>
<span>以應用程式為核心虛擬化，取代傳統需要 Guest OS 的虛擬化技術</span></li>
</ol><p><span>以下兩張圖是傳統虛擬機器與 Docker 的比較</span></p><ul>
<li><span>虛擬機器（VM）除了包含程式與函式庫之外，還要加上整個作業系統（Guest OS）。</span></li>
<li><span>在 Docker 容器的架構下，容器只需要包含程式與其所需要的函式庫，剩下的部份則由 Docker 容器來處理，所有的程式都共用同一個 host 系統核心。</span></li>
</ul><p><img src="https://i.imgur.com/ordW6Iw.png" alt="" loading="lazy"></p><p><strong><span>Docker常見名詞介紹</span></strong></p><div class="alert alert-success">
<p><span>Docker 包括三個基本概念</span></p>
<ol>
<li><span>映像檔（Image）</span></li>
<li><span>容器（Container）</span></li>
<li><span>倉庫（Repository）</span></li>
</ol>
</div><p><span>執行 Docker 的主機，稱為 Host。</span><br>
<span>在 host 執行 docker run 指令時，Docker 會操作這三個元件來完成任務。</span><br>
<span>首先來了解這三個元件。</span></p><ul>
<li>
<p><ins><span>Docker image</span></ins><br>
<span>它是 Docker 的映像檔主要是一個唯讀的檔案，是啟動 Docker container 要使用到的檔案。</span><br>
<span>另外 Docker 的 image 可以像是堆積木一樣，一層一層的把 Docker image 堆起來。</span><br>
<img src="https://i.imgur.com/dKy7aE1.png" alt="" loading="lazy"><br>
<span>image 裡有必要的資源，但它無法獨立執行，必須要靠 container 間接執行。</span></p>
</li>
<li>
<p><ins><span>Docker Container</span></ins><br>
<span>Docker Container 是透過 Docker image 執行起來的 Process，同一個 Docker image 可以啟動多個 Docker Container。</span></p>
</li>
<li>
<p><ins><span>Docker Hub</span></ins><br>
<span>Docker Hub 可以把它想像成 GitHub，GitHub是用來存放程式碼的倉庫，Docker Hub是來存放 Docker image的倉庫。</span></p>
</li>
</ul><h2 id="Image-和-Container-的關係" data-id="Image-和-Container-的關係"><a class="anchor hidden-xs" href="#Image-和-Container-的關係" title="Image-和-Container-的關係"><span class="octicon octicon-link"></span></a><span>Image 和 Container 的關係</span></h2><p><img src="https://i.imgur.com/lfW3kaI.png" alt="" loading="lazy"></p><p><span>有五種的方式可以產生映像</span></p><ol>
<li><span>從 DockerHub 或是私有的映像倉庫用 docker pull 取得映像</span></li>
<li><span>利用 Dockerfile 以 docker build 產生映像</span></li>
<li><span>將 Container 以 docker commit 轉換成新的映像</span></li>
<li><span>從 tar 檔以 docker import 一個由 container 產生的映像。這個方法會破壞映像檔的生成紀錄。</span></li>
<li><span>從 tar 檔以 docker load 匯入儲存的映像</span></li>
</ol><h2 id="Docker-實做" data-id="Docker-實做"><a class="anchor hidden-xs" href="#Docker-實做" title="Docker-實做"><span class="octicon octicon-link"></span></a><span>Docker 實做</span></h2><p><a href="https://ithelp.ithome.com.tw/articles/10238216" target="_blank" rel="noopener"><span>參考文章: Hello Docker World</span></a></p><p><span>docker run 有明確執行的意思。 docker run 會建立一個 container 並執行；</span><br>
<span>而因為 container 需要基於 image 建立，所以 docker run 有個必要的參數是 image 名稱，即 hello-world</span></p><pre><code>docker run hello-world 範例
</code></pre><p><strong><span>正常執行可以分成兩塊</span></strong></p><ol>
<li><span>確認 Image 存在 Repository</span><br>
<span>首先先確認 hello-world 是否存在於本機的 repository，本機找不到的話，就需要從遠端的 repository 下載。</span><br>
<span>下面即為找不到 image，並從遠端下載的訊息：</span></li>
</ol><p><img src="https://i.imgur.com/cLqgiol.png" alt="" loading="lazy"></p><ol start="2">
<li><span>建立 Container 並執行</span><br>
<span>確認好 Image 存在或下載好後，即可建立 Container 並執行。</span></li>
</ol><div class="alert alert-info">
<p><span>docker run 預設的行為是：</span></p>
<ol>
<li><span>前景建立並執行 container</span></li>
<li><span>等待執行程式結束（exit）後，會回到前景的命令提示字元</span></li>
<li><span>該 container 會被標記成結束狀態</span></li>
</ol>
</div><h3 id="Container" data-id="Container"><a class="anchor hidden-xs" href="#Container" title="Container"><span class="octicon octicon-link"></span></a><span>Container</span></h3><pre><code>docker ps -a
</code></pre><p><span>docker ps 可以看 container 的概況，除了列出有哪些 container 外，也有其他欄位了解 container 相關資訊。</span></p><p><img src="https://i.imgur.com/69xLRbJ.png" alt="" loading="lazy"></p><p><span>STATUS 欄位狀態為 Exited (0)，後面的數字為程式結束後回傳的狀態碼，通常 0 為正常結束，非 0 則是有錯誤。</span><br>
<span>最開頭的 CONTAINER ID 與最後的 NAMES 是獨一無二的</span></p><ul>
<li><span>ID: 79445773230b</span></li>
<li><span>Name: busy_lumiere</span></li>
</ul><h4 id="Remove-Container" data-id="Remove-Container"><a class="anchor hidden-xs" href="#Remove-Container" title="Remove-Container"><span class="octicon octicon-link"></span></a><span>Remove Container</span></h4><pre><code># 使用 CONTAINER ID: 79445773230b 或 NAMES: busy_lumiere皆可
docker rm 79445773230b 
dicker rm busy_lumiere

# 移除完使用 docker ps 再檢查一次
docker ps -a 
</code></pre><h3 id="Docker-run-流程" data-id="Docker-run-流程"><a class="anchor hidden-xs" href="#Docker-run-流程" title="Docker-run-流程"><span class="octicon octicon-link"></span></a><span>Docker run 流程</span></h3><p><a href="https://ithelp.ithome.com.tw/articles/10239672" target="_blank" rel="noopener"><span>了解 docker run 指令</span></a></p><p><img src="https://i.imgur.com/XNVBfsI.png" alt="" loading="lazy"></p><hr><p><span>使用 IMAGE 建立新的 container 並執行指令，用法如下：</span></p><div class="alert alert-warning">
<p><span>docker run IMAGE</span></p>
</div><p><span>IMAGE 會先從本機 repository 找，有的話就執行；若沒有的話，會到遠端 repository 下載並執行。</span></p><hr><p><span>使用 docker images 指令來查看本機的 image，接著使用 docker pull 指令下載 image</span></p><div class="alert alert-warning">
<p><span>docker images busybox  #查看本機 image</span><br>
<span>docker pull busybox  #下載 image</span></p>
</div><p><img src="https://i.imgur.com/Qxgz7vf.png" alt="" loading="lazy"></p><hr><p><span>Docker 提供建立 container 的指令為 docker create</span><br>
<span>指定 container name 加參數 --name</span></p><div class="alert alert-warning">
<p><span>docker create -i -t --name test busybox</span><br>
<span>docker start -i test  # 啟動 container</span></p>
</div><ul>
<li><span>-i -t 簡單來說，當</span><strong><span>需要跟 container 的 process 互動時，通常會加入這兩個參數</span></strong><span>。互動指的是像 git add -i 會跟使用者一問一答的行為。</span></li>
<li><span>–name 可以幫 container 命名，這個名字會在 docker ps 列表的 NAMES 欄位出現。必須唯一，若撞名則 container 會創建失敗</span></li>
</ul><p><span>成功創建名稱為 test 的 busybox container</span><br>
<img src="https://i.imgur.com/RybPgr0.png" alt="" loading="lazy"></p><ul>
<li><span>run image on linux /bin/sh</span></li>
</ul><pre><code>docker run -it test /bin/sh 
</code></pre><p><img src="https://i.imgur.com/zPOPejB.png" alt="" loading="lazy"></p><hr><h4 id="Docker-remove" data-id="Docker-remove"><a class="anchor hidden-xs" href="#Docker-remove" title="Docker-remove"><span class="octicon octicon-link"></span></a><span>Docker remove</span></h4><div class="alert alert-success">
<p><span>docker rmi (docker image  ls -a -q) -f    #刪除 docker image</span><br>
<span>docker system prune #刪除 docker container</span></p>
</div><h3 id="Linux---deb-Install" data-id="Linux---deb-Install"><a class="anchor hidden-xs" href="#Linux---deb-Install" title="Linux---deb-Install"><span class="octicon octicon-link"></span></a><span>Linux - deb Install</span></h3><p><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener"><span>Ref1: 官網教學:Install Docker Engine on Ubuntu</span></a><br>
<a href="https://note.qidong.name/2018/07/install-docker-with-deb/" target="_blank" rel="noopener"><span>Ref2: 用下载deb的方式来安装docker</span></a></p><p><span>Go to </span><a href="https://download.docker.com/linux/ubuntu/dists/" target="_blank" rel="noopener"><span>https://download.docker.com/linux/ubuntu/dists/</span></a><span>, choose your Ubuntu version</span></p><p><img src="https://i.imgur.com/KxLORdK.png" alt="" loading="lazy"></p><p><span>使用 deb 安裝</span><br>
<span>找到最新的Docker CE穩定版的deb包</span></p><p><a href="https://ubuntu.pkgs.org/20.04/docker-ce-stable-amd64/containerd.io_1.4.9-1_amd64.deb.html" target="_blank" rel="noopener"><span>containerd download link</span></a></p><pre><code>sudo dpkg -i containerd.io_1.4.9-1_amd64.deb
sudo dpkg -i docker-ce-cli_20.10.8_3-0_ubuntu-focal_amd64.deb
sudo dpkg -i docker-ce_20.10.8_3-0_ubuntu-focal_amd64.deb
</code></pre><p><span>完成，測試版本</span><br>
<span>docker --version</span></p><pre><code>Docker version 20.10.8, build 3967b7d
</code></pre><p><img src="https://i.imgur.com/ptc6BHU.png" alt="" loading="lazy"></p><h3 id="Linux---apt-Install" data-id="Linux---apt-Install"><a class="anchor hidden-xs" href="#Linux---apt-Install" title="Linux---apt-Install"><span class="octicon octicon-link"></span></a><span>Linux - apt Install</span></h3><p><a href="https://ithelp.ithome.com.tw/articles/10190728" target="_blank" rel="noopener"><span>Docker 的底層是使用 Linux Kernel的 Namespace 和 Cgroup 組合而成的</span></a></p><ol>
<li><span>Namespace：用來做環境隔離使用的，像是把Process ID、User ID、Network…等等的環境執行狀態隔離開來。</span><br>
<span>舉個例子來說在一台實體機器上，有 2個 Namespace，Namespace 1 和 Namepsace2。Namespace 1 裡面的 PID 有 1，Namespace 2的PID 也可以有 1 的 PID，這樣就做到執行環境上PID 的隔離。如下圖</span></li>
</ol><p><img src="https://i.imgur.com/3bTtwV1.png" alt="" loading="lazy"></p><ol start="2">
<li><span>Cgroup：用來做系統資源的管理，如：CPU、Memory、I/O…等等，資源做有效的隔離和做使用上的限制。</span></li>
</ol><h4 id="Install" data-id="Install"><a class="anchor hidden-xs" href="#Install" title="Install"><span class="octicon octicon-link"></span></a><span>Install</span></h4><p><a href="https://blog.gtwang.org/virtualization/ubuntu-linux-install-docker-tutorial/" target="_blank" rel="noopener"><span>使用 apt 安裝 Docker</span></a></p><pre><code>sudo apt-get install docker.io
</code></pre><p><span>安裝好之後，查看一下 docker 服務是否有正常啟動</span></p><pre><code>service docker status
</code></pre><p><img src="https://i.imgur.com/JJulNbd.png" alt="" loading="lazy"></p><p><span>查看 Docker 的版本資訊：</span></p><pre><code>docker version
</code></pre><p><img src="https://i.imgur.com/GD0j8TX.png" alt="" loading="lazy"></p><p><span>若要下載 container 映像檔，可以使用 pull 並且指定 container 的名稱</span></p><pre><code>docker pull ubuntu
</code></pre><p><img src="https://i.imgur.com/nQWujDv.png" alt="" loading="lazy"></p><p><span>docker 的 images 指令可以列出目前系統上所有的 container 映像檔</span></p><pre><code>docker images
</code></pre><h3 id="Windows" data-id="Windows"><a class="anchor hidden-xs" href="#Windows" title="Windows"><span class="octicon octicon-link"></span></a><span>Windows</span></h3><p><span>首先 Docker 會確認 image 是否存在，可以用 docker images 指令來查看本機的 image，接著使用 docker pull 指令下載 image。</span></p><pre><code># 查看本機 image
docker images 
# 下載 image
docker pull hello-word
</code></pre><p><img src="https://i.imgur.com/d9JdFd7.png" alt="" loading="lazy"></p><p><span>在 Docker 裡面，其實是有分 Detached 和 foreground，所謂的 Detached 就是所謂的背景執行 ( -d 參數 )， 背景執行的時候，基本上，要和 Container 溝通，就只能靠網路芳鄰等機制了； 也就是說，沒辦法用終端機進行溝通，除非我們再把他給 attach 。</span></p><p><span>而如果要使用 foreground，我們則要使用 -it 這個參數。</span></p><pre><code>docker run -it ubuntu bash
</code></pre><p><span>docker run -it ubuntu bash 這個命令的意思就是，我們要運行 ubuntu， 並使用 foreground 模式，並且於啟動後，進入 bash .</span></p><p><span>/bin/bash or bash 代表要求 ubuntu 執行 /bin/bash 這支程式，也就是 command line 的介面</span></p><p><img src="https://i.imgur.com/4c2OuIV.png" alt="" loading="lazy"></p><p><span>成功進入此 docker系統 (ubuntu)</span><br>
<span>此時觀察 docker ps 有哪些 container</span></p><p><img src="https://i.imgur.com/5dyTCtz.png" alt="" loading="lazy"></p><h4 id="建立-container" data-id="建立-container"><a class="anchor hidden-xs" href="#建立-container" title="建立-container"><span class="octicon octicon-link"></span></a><span>建立 container</span></h4><p><span>Docker 提供建立 container 的指令為 docker create</span></p><h3 id="Docker-File-實做" data-id="Docker-File-實做"><a class="anchor hidden-xs" href="#Docker-File-實做" title="Docker-File-實做"><span class="octicon octicon-link"></span></a><span>Docker File 實做</span></h3><p><a href="https://philipzheng.gitbook.io/docker_practice/image/create" target="_blank" rel="noopener"><span>Dockerfile是一種文字格式的設定檔</span></a><span>，可以透過Dockerfile快速建立自訂的映像檔(image)，換句話說，Dockerfile就像是建置Docker Image的腳本。</span></p><p><span>Dockerfile結構</span><br>
<span>大致上可以分成四個部分構成</span><br>
<span>1.基礎映像檔資訊</span><br>
<span>2.維護者資訊</span><br>
<span>3.映像檔操作指令</span><br>
<span>4.容器啟動時需執行指令</span></p><h4 id="建立自己的-docker-image-步驟" data-id="建立自己的-docker-image-步驟"><a class="anchor hidden-xs" href="#建立自己的-docker-image-步驟" title="建立自己的-docker-image-步驟"><span class="octicon octicon-link"></span></a><span>建立自己的 docker image 步驟</span></h4><div class="alert alert-danger">
<p><span>step1: 撰寫docker file</span><br>
<span>step2: 在docker file 資料夾下 執行 docker build . -t xxx (name of your image)</span><br>
<span>step3: 執行自己的 image: docker run -i -t xxx</span><br>
<span>step4: finish</span></p>
</div><p><span>Dockerfile 基本的語法是</span></p><ol>
<li><span>使用#來註釋</span></li>
<li><span>FROM 指令告訴 Docker 使用哪個映像檔作為基底</span></li>
<li><span>接著是維護者的信息</span></li>
<li><span>RUN開頭的指令會在建立中執行，比如安裝一個套件，在這裏使用 apt-get 來安裝了一些套件</span></li>
</ol><hr><h5 id="Error-msg" data-id="Error-msg"><a class="anchor hidden-xs" href="#Error-msg" title="Error-msg"><span class="octicon octicon-link"></span></a><span>Error msg:</span></h5><p><span>WARNING: Running pip as the ‘root’ user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: </span><a href="https://pip.pypa.io/warnings/venv" target="_blank" rel="noopener"><span>https://pip.pypa.io/warnings/venv</span></a></p><p><span>解決方法</span></p><pre><code>FROM python:3.8.3

RUN pip install --upgrade pip

ENV PATH="/home/myuser/.local/bin:${PATH}"

RUN useradd -m myuser
USER myuser
WORKDIR /home/worker

COPY --chown=myuser:myuser requirements.txt requirements.txt
#COPY requirements.txt requirements.txt
RUN pip install --user -r requirements.txt
#RUN pip install  -r requirements.txt


COPY --chown=myuser:myuser . .
#COPY  . .

CMD ["python3","hello.py"]
</code></pre><hr><div class="alert alert-success">
<p><span>Image is referenced in multiple repositories - image is referenced in multiple repositories</span></p>
</div><p><span>原因: 這個image id指向了兩個repository，因此無法刪除。</span></p><p><span>用 docker rmi repository/tag 就可以刪除</span></p><pre><code>docker rmi oldelette/test0702:v3
</code></pre><hr><h4 id="上傳映像檔---Linux" data-id="上傳映像檔---Linux"><a class="anchor hidden-xs" href="#上傳映像檔---Linux" title="上傳映像檔---Linux"><span class="octicon octicon-link"></span></a><span>上傳映像檔 - Linux</span></h4><p><a href="https://ithelp.ithome.com.tw/articles/10192824" target="_blank" rel="noopener"><span>上傳 Docker Image 到 Docker Hub</span></a></p><p><span>docker login 指令，登入自己的帳號。 [id: oldelette pass: asdf0710@]</span></p><pre><code>docker login # enter ID/Pwd in terminal
docker login -u oldelette -p asdf0710@
</code></pre><p><img src="https://i.imgur.com/uQp74zk.png" alt="" loading="lazy"></p><ul>
<li><span>標上 tag 和 push</span></li>
</ul><pre><code>docker tag 51af8ad67793 oldelette/test0702:v2
docker push oldelette/test0702:v2
</code></pre><p><span>完成上傳</span><br>
<img src="https://i.imgur.com/T6TYWPO.png" alt="" loading="lazy"></p><h4 id="上傳映像檔---Windows" data-id="上傳映像檔---Windows"><a class="anchor hidden-xs" href="#上傳映像檔---Windows" title="上傳映像檔---Windows"><span class="octicon octicon-link"></span></a><span>上傳映像檔 - Windows</span></h4><p><a href="https://ithelp.ithome.com.tw/articles/10192824" target="_blank" rel="noopener"><span>[Day 4] 上傳 Docker Image 到 Docker Hub</span></a></p><p><span>在上傳 Docker Image 之前，我們必須先建立一個 Docker Repository</span></p><ul>
<li><span>標上 tag</span></li>
</ul><pre><code>docker tag e7e367c881d9 oldelette/test0702
</code></pre><p><img src="https://i.imgur.com/ic5Q4xZ.png" alt="" loading="lazy"></p><ul>
<li><span>使用 docker push 指令，就可以將 tag 好的 Image，上傳到指定的 Repository</span></li>
</ul><pre><code>docker push oldelette/test0702
</code></pre><ul>
<li>
<p><span>上傳成功</span><br>
<img src="https://i.imgur.com/bWaOvAu.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>可以用 docker search 找到我們上傳到 dockerhub中的 image</span><br>
<img src="https://i.imgur.com/kv0gR1J.png" alt="" loading="lazy"></p>
</li>
<li>
<p><span>改變image 內容 - docker commit</span></p>
</li>
</ul><pre><code>docker commit -m "python install" d30fbba1a6b3 oldelette/test0702:v1
</code></pre><p><span>d30fbba1a6b3 為 docker ps 的 id</span></p><h2 id="Docker-Image" data-id="Docker-Image"><a class="anchor hidden-xs" href="#Docker-Image" title="Docker-Image"><span class="octicon octicon-link"></span></a><span>Docker Image</span></h2><p><a href="https://aws.amazon.com/cn/blogs/china/choose-the-best-docker-image-for-your-python-application/" target="_blank" rel="noopener"><span>为你的 Python 应用选择一个最好的 Docker 映像</span></a></p><p><span>Docker Image 在尺寸方面</span></p><table>
<thead>
<tr>
<th><span>Linux 發布版本</span></th>
<th><span>Image Name</span></th>
<th><span>Command</span></th>
<th><span>Size</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>Ubuntu</span></td>
<td><span>ubuntu:18.04</span></td>
<td><span>docker pull ubuntu:18.04</span></td>
<td><span>64.2MB</span></td>
</tr>
<tr>
<td><span>Alphine</span></td>
<td><span>alpine:latest</span></td>
<td><span>docker pull alpine:latest</span></td>
<td><span>5.59MB</span></td>
</tr>
<tr>
<td><span>Debian</span></td>
<td><span>debian:buster</span></td>
<td><span>docker pull amd64/debian:buster</span></td>
<td><span>114MB</span></td>
</tr>
<tr>
<td><span>CentOS</span></td>
<td><span>centos:8</span></td>
<td><span>docker pull centos:8</span></td>
<td><span>237MB</span></td>
</tr>
<tr>
<td><span>Amazon Linux 2</span></td>
<td><span>amazonlinux:latest</span></td>
<td><span>docker pull amazonlinux:latest</span></td>
<td><span>163MB</span></td>
</tr>
<tr>
<td><span>Debian</span></td>
<td><span>python:3.7</span></td>
<td><span>docker pull python:3.7</span></td>
<td><span>919MB</span></td>
</tr>
<tr>
<td><span>Alphine</span></td>
<td><span>python:3.7-slim</span></td>
<td><span>docker pull python:3.7-slim</span></td>
<td><span>179MB</span></td>
</tr>
</tbody>
</table><p><img src="https://i.imgur.com/NboEMrJ.png" alt="" loading="lazy"></p><h3 id="選擇-Python-Image" data-id="選擇-Python-Image"><a class="anchor hidden-xs" href="#選擇-Python-Image" title="選擇-Python-Image"><span class="octicon octicon-link"></span></a><span>選擇 Python Image</span></h3><p><a href="https://blog.wu-boy.com/2021/07/building-minimal-docker-containers-for-python-applications/" target="_blank" rel="noopener"><span>打造最小 Python Docker 容器</span></a><br>
<a href="https://blog.tonychoucc.com/post/2020-10-28-dont-use-alpine-image-for-python/" target="_blank" rel="noopener"><span>Python base image 切勿使用 alpine</span></a></p><p><span>要打造小一點的 Image，可以先從 FROM 下手，官方其實有提到，如果是要拿來當 Production 的話，建議使用 python: &lt; version &gt;-slim。</span><br>
<span>這裡面把一些不必要的套件全部清除了，只留下最基本要跑的 Python 套件，開發者可以透過這個 Image 再去疊加要用的套件，這樣 Image 會是最小的。</span></p><h2 id="paramiko" data-id="paramiko"><a class="anchor hidden-xs" href="#paramiko" title="paramiko"><span class="octicon octicon-link"></span></a><span>paramiko</span></h2><p><a href="https://hub.docker.com/r/linuxserver/openssh-server" target="_blank" rel="noopener"><span>linuxserver/openssh-server</span></a></p><pre><code>docker run -d \
  --name=openssh-server \
  --hostname=openssh-server `#optional` \
  -e PUID=1000 \
  -e PGID=1000 \
  -e SUDO_ACCESS=true `#optional` \
  -e PASSWORD_ACCESS=true `#optional` \
  -e USER_PASSWORD=123 `#optional` \
  -e USER_NAME=test `#optional` \
  -p 2222:2222 \
  -v /path/to/appdata/config:/config \
  --restart unless-stopped \
  lscr.io/linuxserver/openssh-server
</code></pre><p><span>2021.10.12</span></p><div class="alert alert-success">
&lt;home&gt; 
<br>docker run -d -P --name test_sshd rastasheep/ubuntu-sshd:18.04<br>
docker port test_sshd 22<br>
ssh root@localhost -p 49153
<br>
&lt;office&gt;
<br>docker run -d --net=host rastasheep/ubuntu-sshd<br>
ssh root@localhost
</div><h3 id="ssh-example" data-id="ssh-example"><a class="anchor hidden-xs" href="#ssh-example" title="ssh-example"><span class="octicon octicon-link"></span></a><span>ssh example</span></h3><p><a href="https://gist.github.com/vladwa/bc49621782736a825844ee4c2a7dacae" target="_blank" rel="noopener"><span>參考Github: </span></a></p><p><a href="https://github.com/oldelette/Coding_style/tree/main/ssh_test" target="_blank" rel="noopener"><span>Follow code put on My Github</span></a></p><pre><code class="python hljs"><div class="wrapper"><div class="gutter linenumber"><span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span></div><div class="code"><span class="hljs-keyword">import</span> paramiko
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

HOSTNAME = <span class="hljs-string">"172.17.0.2"</span>
PORT = <span class="hljs-number">2222</span>
USERNAME = <span class="hljs-string">"test"</span>
PASSWORD = <span class="hljs-string">"123"</span>
labels=[<span class="hljs-string">"Name"</span>,<span class="hljs-string">"Content"</span>]
<span class="hljs-comment">#labels=["Name"]</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_sudo_command</span>(<span class="hljs-params">
    ssh_username: <span class="hljs-built_in">str</span>, ssh_password: <span class="hljs-built_in">str</span>, ssh_machine: <span class="hljs-built_in">str</span>, ssh_port: <span class="hljs-built_in">int</span>, command: <span class="hljs-built_in">str</span>
</span>) -&gt; bool:</span>
    <span class="hljs-comment"># conn = get_ssh_connection(ssh_machine=ssh_machine, ssh_username=ssh_username, ssh_password=ssh_password)</span>
    client = paramiko.SSHClient()
    client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    client.connect(
        hostname=ssh_machine,
        port=ssh_port,
        username=ssh_username,
        password=ssh_password,
        timeout=<span class="hljs-number">10</span>,
    )

    jobid = <span class="hljs-string">"None"</span>
    command = <span class="hljs-string">"sudo -S -p '' %s"</span> % command
    logging.info(<span class="hljs-string">"Job[%s]: Executing: %s"</span> % (jobid, command))
    stdin, stdout, stderr = client.exec_command(command=command)
    stdin.write(ssh_password + <span class="hljs-string">"\n"</span>)
    stdin.flush()
    stdoutput = [<span class="hljs-built_in">str</span>(line) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> stdout]
    stderrout = [<span class="hljs-built_in">str</span>(line) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> stderr]
    
    <span class="hljs-comment">#df1 = pd.DataFrame(stdoutput, columns = labels)</span>
    <span class="hljs-comment">#print(df1)</span>
    <span class="hljs-string">"""
    path= "output.txt"
    f = open(path,"w")
    f.writelines(stdoutput)
    f.close()
    #print(stdoutput)
    #print(stderrout)
    """</span>
    filename=<span class="hljs-string">'savconfig.txt'</span>
    data = pd.read_csv(filename,names=labels,sep=<span class="hljs-string">':'</span>)
    <span class="hljs-comment">#data = pd.read_table(filename,names=labels,sep=':')</span>
    print(data)
    print(<span class="hljs-string">"--"</span> * <span class="hljs-number">20</span>)
    client.close()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(stderrout) == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">False</span>
</div></div></code></pre><h3 id="useradd" data-id="useradd"><a class="anchor hidden-xs" href="#useradd" title="useradd"><span class="octicon octicon-link"></span></a><span>useradd</span></h3><p><a href="https://serverfault.com/questions/367559/how-to-add-a-user-without-knowing-the-encrypted-form-of-the-password" target="_blank" rel="noopener"><span>How to add a user without knowing the encrypted form of the password?</span></a></p><pre><code>sudo useradd -p $(echo "asdf" | openssl passwd -1 -stdin) mcleezs
</code></pre><p><img src="https://i.imgur.com/pXULMPe.png" alt="" loading="lazy"></p><h2 id="Docker-Cloud" data-id="Docker-Cloud"><a class="anchor hidden-xs" href="#Docker-Cloud" title="Docker-Cloud"><span class="octicon octicon-link"></span></a><span>Docker Cloud</span></h2><p><a href="https://hub.docker.com/" target="_blank" rel="noopener"><span>Docker Cloud 網站</span></a><span>有提供一個註冊處（registry）功能，可以讓使用者上傳自己製作的 Docker 影像（image），分享給其他人下載（或是自己使用），看起來有點類似 GitHub，只是它裡面放的東西都是已經建立好的 Docker 影像（images）。</span></p><p><span>在註冊處（registry）中會包含許多個套件庫（repositories），而每個套件庫又包含了許多的 Docker 影像（images），我們可以在帳號的註冊處（registry）中建立好多個套件庫（repositories），方便管理不同類型的 Docker 影像（images）。</span></p><h3 id="安裝-Windows-Docker-Desktop" data-id="安裝-Windows-Docker-Desktop"><a class="anchor hidden-xs" href="#安裝-Windows-Docker-Desktop" title="安裝-Windows-Docker-Desktop"><span class="octicon octicon-link"></span></a><span>安裝 Windows Docker Desktop</span></h3><p><span>如果有此error，</span><a href="https://stackoverflow.com/questions/63845591/docker-wsl-2-installation-is-incomplete" target="_blank" rel="noopener"><span>參考這個</span></a></p><p><img src="https://i.imgur.com/iyExLhN.png" alt="" loading="lazy"></p><h1 id="Harbor" data-id="Harbor"><a class="anchor hidden-xs" href="#Harbor" title="Harbor"><span class="octicon octicon-link"></span></a><span>Harbor</span></h1><p><img src="https://i.imgur.com/s2QTx03.png" alt="" loading="lazy"></p><p><a href="https://ithelp.ithome.com.tw/articles/10218046" target="_blank" rel="noopener"><span>Docker 私有庫工具 Harbor</span></a><br>
<span>Harbor 是由 VMWare 公司用 Go 語言所開發的開源軟體，用於除存團隊私有的 image，Harbor 提供了簡易的 UI 介面，包含權限控管，及跨機器的自動同步功能，且安裝容易</span></p><p><span>Harbor 提供權限控管的功能，以下介紹 Harbor 區分哪些權限：</span></p><p><strong><span>權限訪問介紹</span></strong></p><ul>
<li><span>Guest: 僅提供該用戶擁有 pull images 的權限</span></li>
<li><span>Developer: 提供該用戶擁有 pull or push images 的權限</span></li>
<li><span>Admin: 提供該用戶擁有管理該群組的所有權限，(EX:新增/汰除該群組人員、建立新專案、建立人員、選擇專案是否對外…)</span></li>
</ul><p><img src="https://i.imgur.com/47x4FBc.png" alt="" loading="lazy"></p></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc expand"><ul class="nav">
<li><a href="#Docker-amp-Kubernetes" title="Docker &amp; Kubernetes">Docker &amp; Kubernetes</a><ul class="nav">
<li><a href="#Container-Runtime-Interface-CRI" title="Container Runtime Interface (CRI)">Container Runtime Interface (CRI)</a><ul class="nav">
<li><a href="#CRI-架構" title="CRI 架構">CRI 架構</a></li>
</ul>
</li>
<li><a href="#Kubernetes-四元件" title="Kubernetes 四元件">Kubernetes 四元件</a><ul class="nav">
<li><a href="#Pod" title="Pod">Pod</a></li>
<li><a href="#Worker-Node" title="Worker Node">Worker Node</a></li>
<li><a href="#Master-Node" title="Master Node">Master Node</a></li>
<li><a href="#Cluster" title="Cluster">Cluster</a></li>
</ul>
</li>
<li><a href="#安裝-Kubernetes" title="安裝 Kubernetes">安裝 Kubernetes</a></li>
</ul>
</li>
<li class=""><a href="#Docker" title="Docker">Docker</a><ul class="nav">
<li><a href="#Image-和-Container-的關係" title="Image 和 Container 的關係">Image 和 Container 的關係</a></li>
<li><a href="#Docker-實做" title="Docker 實做">Docker 實做</a><ul class="nav">
<li><a href="#Container" title="Container">Container</a></li>
<li><a href="#Docker-run-流程" title="Docker run 流程">Docker run 流程</a></li>
<li><a href="#Linux---deb-Install" title="Linux - deb Install">Linux - deb Install</a></li>
<li><a href="#Linux---apt-Install" title="Linux - apt Install">Linux - apt Install</a></li>
<li><a href="#Windows" title="Windows">Windows</a></li>
<li><a href="#Docker-File-實做" title="Docker File 實做">Docker File 實做</a></li>
</ul>
</li>
<li><a href="#Docker-Image" title="Docker Image">Docker Image</a><ul class="nav">
<li><a href="#選擇-Python-Image" title="選擇 Python Image">選擇 Python Image</a></li>
</ul>
</li>
<li class=""><a href="#paramiko" title="paramiko">paramiko</a><ul class="nav">
<li class=""><a href="#ssh-example" title="ssh example">ssh example</a></li>
<li><a href="#useradd" title="useradd">useradd</a></li>
</ul>
</li>
<li><a href="#Docker-Cloud" title="Docker Cloud">Docker Cloud</a><ul class="nav">
<li><a href="#安裝-Windows-Docker-Desktop" title="安裝 Windows Docker Desktop">安裝 Windows Docker Desktop</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Harbor" title="Harbor">Harbor</a></li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">全部收起</a><a class="back-to-top" href="#">回到頂部</a><a class="go-to-bottom" href="#">移至底部</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc expand"><ul class="nav">
<li><a href="#Docker-amp-Kubernetes" title="Docker &amp; Kubernetes">Docker &amp; Kubernetes</a><ul class="nav">
<li><a href="#Container-Runtime-Interface-CRI" title="Container Runtime Interface (CRI)">Container Runtime Interface (CRI)</a><ul class="nav">
<li><a href="#CRI-架構" title="CRI 架構">CRI 架構</a></li>
</ul>
</li>
<li><a href="#Kubernetes-四元件" title="Kubernetes 四元件">Kubernetes 四元件</a><ul class="nav">
<li><a href="#Pod" title="Pod">Pod</a></li>
<li><a href="#Worker-Node" title="Worker Node">Worker Node</a></li>
<li><a href="#Master-Node" title="Master Node">Master Node</a></li>
<li><a href="#Cluster" title="Cluster">Cluster</a></li>
</ul>
</li>
<li><a href="#安裝-Kubernetes" title="安裝 Kubernetes">安裝 Kubernetes</a></li>
</ul>
</li>
<li class=""><a href="#Docker" title="Docker">Docker</a><ul class="nav">
<li><a href="#Image-和-Container-的關係" title="Image 和 Container 的關係">Image 和 Container 的關係</a></li>
<li><a href="#Docker-實做" title="Docker 實做">Docker 實做</a><ul class="nav">
<li><a href="#Container" title="Container">Container</a></li>
<li><a href="#Docker-run-流程" title="Docker run 流程">Docker run 流程</a></li>
<li><a href="#Linux---deb-Install" title="Linux - deb Install">Linux - deb Install</a></li>
<li><a href="#Linux---apt-Install" title="Linux - apt Install">Linux - apt Install</a></li>
<li><a href="#Windows" title="Windows">Windows</a></li>
<li><a href="#Docker-File-實做" title="Docker File 實做">Docker File 實做</a></li>
</ul>
</li>
<li><a href="#Docker-Image" title="Docker Image">Docker Image</a><ul class="nav">
<li><a href="#選擇-Python-Image" title="選擇 Python Image">選擇 Python Image</a></li>
</ul>
</li>
<li class=""><a href="#paramiko" title="paramiko">paramiko</a><ul class="nav">
<li class=""><a href="#ssh-example" title="ssh example">ssh example</a></li>
<li><a href="#useradd" title="useradd">useradd</a></li>
</ul>
</li>
<li><a href="#Docker-Cloud" title="Docker Cloud">Docker Cloud</a><ul class="nav">
<li><a href="#安裝-Windows-Docker-Desktop" title="安裝 Windows Docker Desktop">安裝 Windows Docker Desktop</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Harbor" title="Harbor">Harbor</a></li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">全部收起</a><a class="back-to-top" href="#">回到頂部</a><a class="go-to-bottom" href="#">移至底部</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
